<!DOCTYPE html>
<html lang='en'>

<head>
  <meta name="generator" content="Hexo 6.2.0">
  <meta charset="utf-8">
  

  <meta http-equiv='x-dns-prefetch-control' content='on' />
  <link rel='dns-prefetch' href='https://fastly.jsdelivr.net'>
  <link rel="preconnect" href="https://fastly.jsdelivr.net" crossorigin>
  <link rel='dns-prefetch' href='//unpkg.com'>

  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  <title>vue3个人教程 - 个人博客</title>

  
    <meta name="description" content="文件概述:本人已经有vue2基础,vue3使用基础,想系统的总结一下vue3,加深对vue3的理解 参考文件:(Vue3)_小满zs的博客-CSDN博客 [浅析vue2中 Options API 和vue3中 Composition API 的对比 - 古兰精 - 博客园 (cnblogs.com)](https:&#x2F;&#x2F;www.cnblogs.com&#x2F;goloving&#x2F;p&#x2F;15411870.html">
<meta property="og:type" content="article">
<meta property="og:title" content="vue3个人教程">
<meta property="og:url" content="http://example.com/2023/01/29/vue3%E4%B8%AA%E4%BA%BA%E6%95%99%E7%A8%8B/index.html">
<meta property="og:site_name" content="个人博客">
<meta property="og:description" content="文件概述:本人已经有vue2基础,vue3使用基础,想系统的总结一下vue3,加深对vue3的理解 参考文件:(Vue3)_小满zs的博客-CSDN博客 [浅析vue2中 Options API 和vue3中 Composition API 的对比 - 古兰精 - 博客园 (cnblogs.com)](https:&#x2F;&#x2F;www.cnblogs.com&#x2F;goloving&#x2F;p&#x2F;15411870.html">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2023-01-29T14:09:30.000Z">
<meta property="article:modified_time" content="2023-03-16T13:24:29.954Z">
<meta property="article:author" content="李阳滨">
<meta property="article:tag" content="个人总结">
<meta name="twitter:card" content="summary">
  
  

  <!-- feed -->
  

  
    
<link rel="stylesheet" href="/css/main.css">

  

  

  
</head>

<body>
  




  <div class='l_body' id='start'>
    <aside class='l_left' layout='post'>
    


<header class="header">

<div class="logo-wrap"><a class="title" href="/"><div class="main">个人博客</div></a></div>
<nav class="menu dis-select"></nav></header>

<div class="widgets">

<div class="widget-wrap single" id="toc"><div class="widget-header cap dis-select"><span class="name">TOC</span></div><div class="widget-body fs14"><div class="doc-tree active"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%A6%82%E8%BF%B0"><span class="toc-text">文件概述:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E4%BB%B6"><span class="toc-text">参考文件:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#demo%E5%9C%B0%E5%9D%80"><span class="toc-text">demo地址:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0"><span class="toc-text">Vue3学习笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D"><span class="toc-text">一.简单介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E3%80%81vue2-%E7%9A%84-Options-API%E4%B8%8Evue3-%E4%B8%AD%E7%9A%84-Composition-API"><span class="toc-text">(一)、vue2 的 Options API与vue3 中的 Composition API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-Options-API-%E9%80%89%E9%A1%B9API"><span class="toc-text">1.Options API - (选项API)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Composition-API-%E7%BB%84%E5%90%88%E5%BC%8FAPI"><span class="toc-text">2.Composition API - (组合式API)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-Vue3-%E6%96%B0%E7%89%B9%E6%80%A7%E4%BB%8B%E7%BB%8D"><span class="toc-text">(二).Vue3 新特性介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E9%87%8D%E5%86%99%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A"><span class="toc-text">1. 重写双向绑定</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Vue3-%E4%BC%98%E5%8C%96Vdom"><span class="toc-text">2.Vue3 优化Vdom</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-Vue3-Fragment"><span class="toc-text">3.Vue3 Fragment</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%85%B6%E4%BB%96"><span class="toc-text">4.其他</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-ref%E5%85%A8%E5%AE%B6%E6%A1%B6"><span class="toc-text">二.ref全家桶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-ref"><span class="toc-text">(一)ref()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-Ref"><span class="toc-text">(二)Ref</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-isRef"><span class="toc-text">(三)isRef()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B-shallowRef"><span class="toc-text">(四)shallowRef()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94-triggerRef"><span class="toc-text">(五)triggerRef ()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-reactive%E5%85%A8%E5%AE%B6%E6%A1%B6"><span class="toc-text">三.reactive全家桶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-reactive"><span class="toc-text">(一)reactive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-readonly"><span class="toc-text">(二)readonly</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-isReactive"><span class="toc-text">(三)isReactive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B-shallowReactive"><span class="toc-text">(四)shallowReactive</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-to%E5%85%A8%E5%AE%B6%E6%A1%B6"><span class="toc-text">四.to全家桶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-toRef"><span class="toc-text">(一)toRef()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-toRefs"><span class="toc-text">(二)toRefs()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-toRaw"><span class="toc-text">(三)toRaw()</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94-computed%E5%B1%9E%E6%80%A7"><span class="toc-text">五.computed属性</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E5%AE%9A%E4%B9%89"><span class="toc-text">(一)定义:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E4%BD%BF%E7%94%A8"><span class="toc-text">(二)使用:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD-watch%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-text">六.watch监听器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">(一)基本使用:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">(二)注意事项:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%9B%91%E5%90%AC%E5%A4%9A%E4%B8%AA%E6%95%B0%E6%8D%AE"><span class="toc-text">1.监听多个数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%B7%B1%E5%BA%A6%E7%9B%91%E5%90%AC"><span class="toc-text">2.深度监听</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%8F%AA%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E5%B1%9E%E6%80%A7"><span class="toc-text">3.只监听对象中的一个属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%B7%B1%E5%BA%A6%E7%9B%91%E5%90%AC%E5%AF%B9%E8%B1%A1%E5%87%BA%E7%8E%B0%E7%9A%84%E5%90%8C%E6%BA%90%E9%97%AE%E9%A2%98"><span class="toc-text">4.深度监听对象出现的同源问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-watch%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">5.watch返回值</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%83-watchEffect"><span class="toc-text">七.watchEffect</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E5%AE%9A%E4%B9%89-1"><span class="toc-text">(一)定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E6%B8%85%E9%99%A4%E5%89%AF%E4%BD%9C%E7%94%A8-oninvalidate"><span class="toc-text">(二)清除副作用(oninvalidate)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">(三)返回值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B-%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-text">(四)一些配置项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AB-%E7%BB%84%E4%BB%B6"><span class="toc-text">八.组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E5%B1%80%E9%83%A8%E7%BB%84%E4%BB%B6"><span class="toc-text">(一)局部组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="toc-text">(二)全局组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E9%80%92%E5%BD%92%E7%BB%84%E4%BB%B6-%E6%9C%80%E5%A5%BD%E5%85%88%E7%9C%8B%E5%90%8E%E9%9D%A2%E7%9A%84props%E5%9C%A8%E7%9C%8B%E8%BF%99%E9%87%8C"><span class="toc-text">(三)递归组件(最好先看后面的props在看这里)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="toc-text">(四)动态组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94-%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6-suspense-%E6%9C%80%E5%A5%BD%E5%85%88%E7%9C%8B%E5%90%8E%E9%9D%A2%E7%9A%84%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD%E5%9C%A8%E7%9C%8B%E8%BF%99%E9%87%8C"><span class="toc-text">(五)异步组件-suspense(最好先看后面的具名插槽在看这里)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BD%9C%E7%94%A8"><span class="toc-text">1.作用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.实现</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AD-%E4%BC%A0%E9%80%81%E7%BB%84%E4%BB%B6-Teleport"><span class="toc-text">(六)传送组件-Teleport</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7"><span class="toc-text">属性:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%83-transition%E8%BF%87%E6%B8%A1%E7%BB%84%E4%BB%B6"><span class="toc-text">(七)transition过渡组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%9F%BA%E7%A1%80%E7%94%A8%E6%B3%95"><span class="toc-text">1.基础用法:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%BB%93%E5%90%88css%E5%8A%A8%E7%94%BB%E5%BA%93%E4%BD%BF%E7%94%A8"><span class="toc-text">2.结合css动画库使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E7%BB%93%E5%90%88js%E5%8A%A8%E7%94%BB%E5%BA%93"><span class="toc-text">3.结合js动画库</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AB-gsap%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8"><span class="toc-text">(八)gsap简单应用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%8F%82%E6%95%B0%E7%AE%80%E5%8D%95%E7%AE%80%E7%BB%8D"><span class="toc-text">1.参数简单简绍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%8A%A8%E7%94%BB%E7%8A%B6%E6%80%81"><span class="toc-text">2.动画状态</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E8%BF%90%E5%8A%A8%E6%96%B9%E5%BC%8F"><span class="toc-text">3.运动方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-text">4.回调函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E5%B8%B8%E8%A7%81%E7%9A%84Getter-x2F-Setter-%E6%96%B9%E6%B3%95"><span class="toc-text">5.常见的Getter &#x2F; Setter 方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-%E6%8E%A7%E5%88%B6%E5%8A%A8%E7%94%BB"><span class="toc-text">6.控制动画</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-gsap-timeline-%E6%97%B6%E9%97%B4%E8%BD%B4"><span class="toc-text">7.gsap.timeline 时间轴</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-gsap-getProperty"><span class="toc-text">8.gsap.getProperty</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B9%9D-transition-group%E7%BB%84%E4%BB%B6"><span class="toc-text">(九)transition-group组件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E4%BD%9C%E7%94%A8-1"><span class="toc-text">1.作用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8-1"><span class="toc-text">2.使用</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%88%97%E8%A1%A8%E7%9A%84%E7%A7%BB%E5%8A%A8%E8%BF%87%E6%B8%A1"><span class="toc-text">3.列表的移动过渡</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-text">十生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-beforeCreate-created"><span class="toc-text">1.beforeCreate,created</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-onBeforeMount-x3D-gt"><span class="toc-text">2.onBeforeMount(()&#x3D;&gt;{})</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-onMounted-x3D-gt"><span class="toc-text">3.onMounted(()&#x3D;&gt;{})</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-onBeforeUpdate-x3D-gt"><span class="toc-text">4.onBeforeUpdate(()&#x3D;&gt;{})</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-onUpdated-x3D-gt"><span class="toc-text">5.onUpdated(()&#x3D;&gt;{})</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-onBeforeUnmount-x3D-gt"><span class="toc-text">6.onBeforeUnmount(()&#x3D;&gt;{})</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-onUnmounted-x3D-gt"><span class="toc-text">7.onUnmounted(()&#x3D;&gt;{})</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-onRenderTracked-x3D-gt"><span class="toc-text">8.onRenderTracked(()&#x3D;&gt;{})</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-onRenderTriggered-x3D-gt"><span class="toc-text">9.onRenderTriggered(()&#x3D;&gt;{})</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-onActivated%E4%B8%8EonDeactivated"><span class="toc-text">10.onActivated与onDeactivated</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81-%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%97%B4%E4%BC%A0%E5%80%BC"><span class="toc-text">十.父子组件间传值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E7%88%B6%E4%BC%A0%E5%AD%90-props"><span class="toc-text">(一)父传子:props</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%B3%A8%E6%84%8F"><span class="toc-text">1..注意:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">2..使用方法:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E5%AD%90%E4%BC%A0%E7%88%B6-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6-%E4%B8%8E%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95-%E5%B1%9E%E6%80%A7"><span class="toc-text">(二)子传父:自定义事件;与调用子组件方法,属性</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">1.自定义事件使用方法:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%88%B6%E7%BB%84%E4%BB%B6%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95-%E5%B1%9E%E6%80%A7"><span class="toc-text">2.父组件调用子组件方法,属性</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-Bus"><span class="toc-text">(三)$Bus</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E8%A7%82%E7%82%B9"><span class="toc-text">个人观点:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%B8%80-%E6%8F%92%E6%A7%BD"><span class="toc-text">十一.插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E5%8C%BF%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-text">(一)匿名插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-text">(二)具名插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-text">(三)作用域插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B-%E5%8A%A8%E6%80%81%E6%8F%92%E6%A7%BD"><span class="toc-text">(四)动态插槽</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5Provide-x2F-Inject"><span class="toc-text">十二.依赖注入Provide &#x2F; Inject</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E4%BD%9C%E7%94%A8"><span class="toc-text">(一)作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E4%BD%BF%E7%94%A8-1"><span class="toc-text">(二)使用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%B8%89-tsx"><span class="toc-text">十三.tsx</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6"><span class="toc-text">(一)安装插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E4%BF%AE%E6%94%B9vite-config-ts%E9%85%8D%E7%BD%AE"><span class="toc-text">(二)修改vite.config.ts配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E4%BF%AE%E6%94%B9tsconfig-json-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">(三)修改tsconfig.json 配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E5%9B%9B%EF%BC%89%E6%96%B0%E5%BB%BAxxx-tsx%E6%96%87%E4%BB%B6"><span class="toc-text">（四）新建xxx.tsx文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E7%9B%B4%E6%8E%A5%E5%86%99"><span class="toc-text">1.直接写</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-vue2%E5%86%99%E6%B3%95"><span class="toc-text">2.vue2写法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-vue3%E5%86%99%E6%B3%95"><span class="toc-text">3.vue3写法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3v-modle"><span class="toc-text">十四.深入理解v-modle</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-text">使用:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E4%B8%AA"><span class="toc-text">单个:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA"><span class="toc-text">多个:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%BA%94-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-text">十五.自定义指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E4%BD%BF%E7%94%A8"><span class="toc-text">(一)使用:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E5%8F%82%E6%95%B0%E8%A7%A3%E9%87%8A"><span class="toc-text">(二)参数解释:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-el"><span class="toc-text">1.el</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-binding"><span class="toc-text">2.binding</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E7%AE%80%E5%86%99%E6%A8%A1%E5%BC%8F"><span class="toc-text">(三)简写模式:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E5%85%AD-Hooks"><span class="toc-text">十六.Hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-mixins%E5%86%99%E6%B3%95"><span class="toc-text">(一)mixins写法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%8A%E7%AB%AF%E5%B0%B1%E6%98%AF"><span class="toc-text">弊端就是:</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-Hooks%E5%86%99%E6%B3%95"><span class="toc-text">(二)Hooks写法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E6%8E%A8%E8%8D%90%E4%B8%80%E4%B8%AAhooks%E5%BA%93"><span class="toc-text">(三)推荐一个hooks库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%B8%83-%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E5%87%BD%E6%95%B0%E4%B8%8E%E5%8F%98%E9%87%8F"><span class="toc-text">十七.定义全局函数与变量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Vue2"><span class="toc-text">Vue2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Vue3"><span class="toc-text">Vue3</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E5%85%AB%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6"><span class="toc-text">十八自定义插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0%E5%85%A8%E5%B1%80%E6%8C%82%E8%BD%BD%E4%B8%80%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E6%95%88%E6%9E%9C%EF%BC%9A"><span class="toc-text">实现一个自定义插件实现全局挂载一个组件的效果：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89%E8%A2%AB%E6%8C%82%E8%BD%BD%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="toc-text">（一）被挂载的组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%88%E4%BA%8C%EF%BC%89%E6%8F%92%E4%BB%B6%E5%A3%B0%E6%98%8E"><span class="toc-text">（二）插件声明</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%88%E4%B8%89%EF%BC%89%E6%8F%92%E4%BB%B6%E6%B3%A8%E5%86%8C"><span class="toc-text">（三）插件注册</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%EF%BC%88%E5%9B%9B%EF%BC%89%E4%BD%BF%E7%94%A8"><span class="toc-text">（四）使用</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#app-use%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">app.use源码实现</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%81%E4%B9%9D-Evnet-Loop%E5%9B%9E%E9%A1%BE"><span class="toc-text">十九.Evnet Loop回顾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1"><span class="toc-text">(一)同步任务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1"><span class="toc-text">(二)异步任务</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%AE%8F%E4%BB%BB%E5%8A%A1"><span class="toc-text">1.宏任务</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E5%BE%AE%E4%BB%BB%E5%8A%A1"><span class="toc-text">2.微任务</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-text">(三)运行机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-%E5%80%9F%E5%8A%A9%E4%BA%86h%E5%87%BD%E6%95%B0"><span class="toc-text">二十.函数式编程(借助了h函数)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#h-%E6%8E%A5%E6%94%B6%E4%B8%89%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-text">h 接收三个参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-text">原理:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E5%8D%81%E4%B8%80-%E5%B0%8F%E6%8A%80%E5%B7%A7"><span class="toc-text">二十一.小技巧</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E4%B8%80%EF%BC%89unplugin-auto-import"><span class="toc-text">（一）unplugin-auto-import</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85-2"><span class="toc-text">1.安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-vite%E9%85%8D%E7%BD%AE"><span class="toc-text">2.vite配置</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%88%E4%BA%8C%EF%BC%89http-server"><span class="toc-text">（二）http-server</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85-3"><span class="toc-text">1.安装</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E7%BB%93%E6%92%92%E8%8A%B1"><span class="toc-text">完结撒花</span></a></li></ol></div></div></div>


</div>


    </aside>
    <div class='l_main'>
      

      

<div class="bread-nav fs12"><div id="breadcrumb"><a class="cap breadcrumb" href="/">Home</a><span class="sep"></span><a class="cap breadcrumb" href="/">Blog</a></div><div id="post-meta">Posted on&nbsp;<time datetime="2023-01-29T14:09:30.000Z">2023-01-29</time></div></div>

<article class='content md post'>
<h1 class="article-title"><span>vue3个人教程</span></h1>
<h2 id="文件概述"><a href="#文件概述" class="headerlink" title="文件概述:"></a>文件概述:</h2><p>本人已经有vue2基础,vue3使用基础,想系统的总结一下vue3,加深对vue3的理解</p>
<h4 id="参考文件"><a href="#参考文件" class="headerlink" title="参考文件:"></a>参考文件:</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq1195566313/category_11618172.html">(Vue3)_小满zs的博客-CSDN博客</a></p>
<p>[浅析vue2中 Options API 和vue3中 Composition API 的对比 - 古兰精 - 博客园 (cnblogs.com)](<a target="_blank" rel="noopener" href="https://www.cnblogs.com/goloving/p/15411870.html#:~:text=%E4%B8%80%E3%80%81vue2">https://www.cnblogs.com/goloving/p/15411870.html#:~:text=一、vue2</a> 的 Options API 1 条例清晰：相同的放在相同的地方，但随着组件功能的增大，关联性会大大降低，组件的阅读和理解难度会增加； 2 调用使用,js 代码，我们在使用 options API 的时候，需要确切了解我们具体可以访问到哪些属性以及我们访问到的当前属性的行为。 在后台 VUE 需要将此属性转换为工作代码，因此我们无法从自动建议和类型检查中受益，因此给我们在使用相关属性时造成了一定弊端。)</p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7005926039171891207">Vue学习之—动态组件中的activated与deactivated钩子函数 - 掘金 (juejin.cn)</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7041862990622605349">GSAP3入门 - 掘金 (juejin.cn)</a></p>
<h4 id="demo地址"><a href="#demo地址" class="headerlink" title="demo地址:"></a>demo地址:</h4><p><a target="_blank" rel="noopener" href="https://github.com/LiYangB/vue3_demo">LiYangB&#x2F;vue3_demo： 在vue2的基础上学习vue3 (github.com)</a></p>
<h2 id="Vue3学习笔记"><a href="#Vue3学习笔记" class="headerlink" title="Vue3学习笔记"></a>Vue3学习笔记</h2><h3 id="一-简单介绍"><a href="#一-简单介绍" class="headerlink" title="一.简单介绍"></a>一.简单介绍</h3><h4 id="一-、vue2-的-Options-API与vue3-中的-Composition-API"><a href="#一-、vue2-的-Options-API与vue3-中的-Composition-API" class="headerlink" title="(一)、vue2 的 Options API与vue3 中的 Composition API"></a>(一)、vue2 的 Options API与vue3 中的 Composition API</h4><h5 id="1-Options-API-选项API"><a href="#1-Options-API-选项API" class="headerlink" title="1.Options API - (选项API)"></a>1.Options API - (选项API)</h5><p>　　在 VUE2 中我们会在一个vue文件中methods，computed，watch，data中等等定义属性和方法，共同处理页面逻辑，我们称这种方式为 Options API。</p>
<p>其优缺点：</p>
<ul>
<li>条例清晰：相同的放在相同的地方，但随着组件功能的增大，关联性会大大降低，组件的阅读和理解难度会增加；</li>
<li>调用使用 this，但逻辑过多时 this 会出现问题，比如指向不明等；</li>
<li>其本身并不是有效的 js 代码，我们在使用 options API 的时候，需要确切了解我们具体可以访问到哪些属性以及我们访问到的当前属性的行为。在后台 VUE 需要将此属性转换为工作代码，因此我们无法从自动建议和类型检查中受益，因此给我们在使用相关属性时造成了一定弊端。</li>
</ul>
<h5 id="2-Composition-API-组合式API"><a href="#2-Composition-API-组合式API" class="headerlink" title="2.Composition API - (组合式API)"></a>2.Composition API - (组合式API)</h5><p>　　在 vue3 Composition API 中，我们的组件代码根据逻辑功能来组织的，一个功能所定义的所有 API 会放在一起（更加的高内聚，低耦合）。这样做即使项目很大，功能很多，我们都能快速的定位到这个功能所用到的所有API，而不像 vue2 Options API 中一个功能所用到的API都是分散的，需要改动功能，到处找API的过程是很费劲的。</p>
<h4 id="二-Vue3-新特性介绍"><a href="#二-Vue3-新特性介绍" class="headerlink" title="(二).Vue3 新特性介绍"></a>(二).Vue3 新特性介绍</h4><h5 id="1-重写双向绑定"><a href="#1-重写双向绑定" class="headerlink" title="1. 重写双向绑定"></a>1. 重写双向绑定</h5><p>Vue2是基于Object.defineProperty()实现,借助getter()与setter()对数据进行一个数据劫持,但是这样数据双向绑定的对数组是失效的,所以Vue2内部重写了七个数组的方法:</p>
<ul>
<li>push</li>
<li>pop</li>
<li>shift</li>
<li>unshift</li>
<li>splice</li>
<li>sort</li>
<li>reverse</li>
</ul>
<p>以实现对数组内部数据改变的监听,又或者直接使用Vue.$set()去新增.</p>
<p>所以Vue3就直接用Proxy去重写了数据的双向绑定,去监听数组变化</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let proxyObj = new Proxy(obj,&#123;</span><br><span class="line">        get : function (target,prop) &#123;</span><br><span class="line">            return prop in target ? target[prop] : 0</span><br><span class="line">        &#125;,</span><br><span class="line">        set : function (target,prop,value) &#123;</span><br><span class="line">            target[prop] = 888;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p>使用proxy还有以下优势:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//丢掉麻烦的备份数据</span><br><span class="line">//省去for in 循环</span><br><span class="line">//可以监听数组变化</span><br><span class="line">//代码更简化</span><br><span class="line">//可以监听动态新增的属性；</span><br><span class="line">//可以监听删除的属性 ；</span><br><span class="line">//可以监听数组的索引和 length 属性</span><br></pre></td></tr></table></figure>

<h5 id="2-Vue3-优化Vdom"><a href="#2-Vue3-优化Vdom" class="headerlink" title="2.Vue3 优化Vdom"></a>2.Vue3 优化Vdom</h5><p>在Vue2中,每次更新diff,都是全量对比,Vue3则只对比带有标记的,这样大大减少了非动态内容的对比消耗</p>
<p>创建<strong>动态</strong> dom 元素的时候，Vdom 除了模拟出来了它的基本信息之外，还给它加了一个标记.这个标记就叫做 patch flag（补丁标记）</p>
<p>patch flag 的强大之处在于，当你的 diff 算法走到 _createBlock 函数的时候，会忽略所有的静态节点，只对有标记的动态节点进行对比，而且在多层的嵌套下依然有效。</p>
<h5 id="3-Vue3-Fragment"><a href="#3-Vue3-Fragment" class="headerlink" title="3.Vue3 Fragment"></a>3.Vue3 Fragment</h5><p>vue3 允许我们支持多个根节点</p>
<p>原理:vue3中新增了一个类似dom的标签元素<code>&lt;Fragment&gt;&lt;/Fragment&gt;</code>。如果在vue页面中有多个元素节点。那么编译时vue会在这些元素节点上添加一个<code>&lt;Fragment&gt;&lt;/Fragment&gt;</code>标签。并且该标签不会出现在dom树中。</p>
<h5 id="4-其他"><a href="#4-其他" class="headerlink" title="4.其他"></a>4.其他</h5><p>比如Tree shaking,支持jsp,对ts更加友好等等</p>
<h3 id="二-ref全家桶"><a href="#二-ref全家桶" class="headerlink" title="二.ref全家桶"></a>二.ref全家桶</h3><h4 id="一-ref"><a href="#一-ref" class="headerlink" title="(一)ref()"></a>(一)ref()</h4><p>作用:接受一个内部值并返回一个响应式且可变的 ref 对象。取值跟赋值都需要通过**.value**属性</p>
<p>小技巧:获取dom节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div ref=&quot;DOM&quot;&gt;李阳滨&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let message = ref&lt;string&gt;(&quot;我是message&quot;)</span><br><span class="line"></span><br><span class="line">const changeMsg = () =&gt; &#123;</span><br><span class="line">  message.value = &quot;我不是message&quot;</span><br><span class="line">  //获取dom节点,名字一定要一致</span><br><span class="line">  const DOM = ref&lt;HTMLDivElement&gt;()</span><br><span class="line">  console.log(DOM.value?.innerHTML)//李阳滨</span><br><span class="line">&#125; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="二-Ref"><a href="#二-Ref" class="headerlink" title="(二)Ref"></a>(二)Ref</h4><p>作用:TS声明一些复杂的ref结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import type &#123;Ref&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">type M =&#123;</span><br><span class="line">  name: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let message: Ref&lt;M&gt; = ref(&#123;name: &#x27;李阳滨&#x27;&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="三-isRef"><a href="#三-isRef" class="headerlink" title="(三)isRef()"></a>(三)isRef()</h4><p>作用:判断是不是一个ref对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref, Ref,isRef &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let message: Ref&lt;string | number&gt; = ref(&quot;我是message&quot;)</span><br><span class="line"></span><br><span class="line">console.log(isRef(message)); //true</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="四-shallowRef"><a href="#四-shallowRef" class="headerlink" title="(四)shallowRef()"></a>(四)shallowRef()</h4><p>作用:ref的简化版,不能进行深度监听,只能进行浅层次监听</p>
<p>注意:shallowRef会被ref影响</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; shallowRef &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">type M =&#123;</span><br><span class="line">  name: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let msg = shallowRef&lt;string&gt;(&quot;李阳滨&quot;)//可以响应msg的改变</span><br><span class="line">let MSG = shallowRef&lt;M&gt;(&#123;name: &#x27;李阳滨&#x27;&#125;)//不能响应MSG内部的改变</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="五-triggerRef"><a href="#五-triggerRef" class="headerlink" title="(五)triggerRef ()"></a>(五)triggerRef ()</h4><p>作用:强制更新页面DOM</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; Ref, shallowRef,triggerRef &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">type Obj = &#123;</span><br><span class="line">  name: string</span><br><span class="line">&#125;</span><br><span class="line">let message: Ref&lt;Obj&gt; = shallowRef(&#123;</span><br><span class="line">  name: &quot;李阳滨&quot;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const changeMsg = () =&gt; &#123;</span><br><span class="line"> message.value.name = &#x27;小满&#x27;</span><br><span class="line"> triggerRef(message)//强制更新页面。使用shallowRef更改数据的话,其实数据已经更改了,但是页面不更新</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt; </span><br></pre></td></tr></table></figure>

<p>小提示:</p>
<p>使用ref去改写数据,源码里面先判断数据是不是对象,是对象内部逻辑是将数据交给reactive,所以说ref可以深度监听,而使用triggerRef ,就不管数据是不是对象,多不会交给reactive,所以无法进行深度监听。</p>
<p>但是如果改变shallowRef监视对象的语句跟改变ref监视对象的语句写在一起,ref会触发triggerRef ,从而也更新了shallowRef监视对象的值</p>
<h3 id="三-reactive全家桶"><a href="#三-reactive全家桶" class="headerlink" title="三.reactive全家桶"></a>三.reactive全家桶</h3><h4 id="一-reactive"><a href="#一-reactive" class="headerlink" title="(一)reactive"></a>(一)reactive</h4><p>作用:接受一个内部值并返回一个响应式且可变的 reactive对象。只能用来绑定引用数据类型。并且使用reactive 去修改值无须.value</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">type M =&#123;</span><br><span class="line">  name: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let person = reactive&lt;M&gt;(&#123;name: &#x27;李阳滨&#x27;&#125;)</span><br><span class="line">const name = person.name</span><br><span class="line">&lt;/script&gt; </span><br></pre></td></tr></table></figure>

<h4 id="二-readonly"><a href="#二-readonly" class="headerlink" title="(二)readonly"></a>(二)readonly</h4><p>作用: 让一个响应式数据变为只读的（深只读）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive ,readonly&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const person = reactive(&#123;count:1&#125;)</span><br><span class="line">const copy = readonly(person)</span><br><span class="line"></span><br><span class="line"> person.count++ //可以更改person与copy</span><br><span class="line"> copy.count++ //报错,copy不能更改</span><br><span class="line"> &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="三-isReactive"><a href="#三-isReactive" class="headerlink" title="(三)isReactive"></a>(三)isReactive</h4><p>作用: 检查一个对象是否是由 reactive 创建的响应式代理</p>
<h4 id="四-shallowReactive"><a href="#四-shallowReactive" class="headerlink" title="(四)shallowReactive"></a>(四)shallowReactive</h4><p>作用:只处理对象最外层属性的响应式（浅响应式）。如果是深层的数据只会改变值,不会改变视图</p>
<h3 id="四-to全家桶"><a href="#四-to全家桶" class="headerlink" title="四.to全家桶"></a>四.to全家桶</h3><h4 id="一-toRef"><a href="#一-toRef" class="headerlink" title="(一)toRef()"></a>(一)toRef()</h4><p>作用:保留响应式数据特性，接收两个参数(响应式对象,属性名)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; reactive,toRef&#125; from &#x27;vue&#x27;</span><br><span class="line">const obj = reactive(&#123;</span><br><span class="line">   foo: 1,</span><br><span class="line">   bar: 1</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">const state = toRef(obj, &#x27;bar&#x27;)//这个state还是响应式的数据(ref)</span><br><span class="line">let state: number = obj.bar//这个就只是单纯的一个数值了</span><br></pre></td></tr></table></figure>

<h4 id="二-toRefs"><a href="#二-toRefs" class="headerlink" title="(二)toRefs()"></a>(二)toRefs()</h4><p>作用:批量解构响应式数据，直接解构获得的数据就不是响应式的了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; reactive, toRefs &#125; from &#x27;vue&#x27;</span><br><span class="line">const obj = reactive(&#123;</span><br><span class="line">   foo: 1,</span><br><span class="line">   bar: 1</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">let &#123; foo, bar &#125; = toRefs(obj)</span><br></pre></td></tr></table></figure>

<h4 id="三-toRaw"><a href="#三-toRaw" class="headerlink" title="(三)toRaw()"></a>(三)toRaw()</h4><p>作用:将响应式对象转化为普通对象</p>
<h3 id="五-computed属性"><a href="#五-computed属性" class="headerlink" title="五.computed属性"></a>五.computed属性</h3><h4 id="一-定义"><a href="#一-定义" class="headerlink" title="(一)定义:"></a>(一)定义:</h4><p>计算属性就是当依赖的属性的值发生变化的时候，才会触发他的更改，如果依赖的值，不发生变化的时候，使用的是缓存中的属性值。</p>
<h4 id="二-使用"><a href="#二-使用" class="headerlink" title="(二)使用:"></a>(二)使用:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; computed, reactive, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">let price = ref(0)</span><br><span class="line"> </span><br><span class="line">let m = computed&lt;string&gt;(()=&gt;&#123;</span><br><span class="line">   return `$` + price.value</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="六-watch监听器"><a href="#六-watch监听器" class="headerlink" title="六.watch监听器"></a>六.watch监听器</h3><h4 id="一-基本使用"><a href="#一-基本使用" class="headerlink" title="(一)基本使用:"></a>(一)基本使用:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//只能监听响应式数据(ref||reactive)</span><br><span class="line">//watch(source,cb,obj)</span><br><span class="line">import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line"> </span><br><span class="line">let message = ref(1)</span><br><span class="line">  </span><br><span class="line">watch(message, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;新的值----&#x27;, newVal);</span><br><span class="line">    console.log(&#x27;旧的值----&#x27;, oldVal);</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    immediate:true,</span><br><span class="line">    deep:true,</span><br><span class="line">    //pre 组件更新前调用 sync 同步执行 post 组件更新之后执行</span><br><span class="line">    flush:&quot;pre&quot;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="二-注意事项"><a href="#二-注意事项" class="headerlink" title="(二)注意事项:"></a>(二)注意事项:</h4><h5 id="1-监听多个数据"><a href="#1-监听多个数据" class="headerlink" title="1.监听多个数据"></a>1.监听多个数据</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line"> </span><br><span class="line">let message = ref(1)</span><br><span class="line">let message2 = ref(1)</span><br><span class="line"></span><br><span class="line">//可以分开写</span><br><span class="line">watch(message, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;新的值----&#x27;, newVal);</span><br><span class="line">&#125;)</span><br><span class="line">watch(message2, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;新的值----&#x27;, newVal);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//也可以写成数组的形式,那newVal也是数组</span><br><span class="line">watch([message,message2], (newVal, oldVal) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;新的值----&#x27;, newVal);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="2-深度监听"><a href="#2-深度监听" class="headerlink" title="2.深度监听"></a>2.深度监听</h5><p>监听ref时深度监听时需要开启deep:true</p>
<p>而监听reactive,可开可不开,因为vue源码对source有个判断,如果是reactive类型,vue会默认开启deep</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref, watch,reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"> </span><br><span class="line">let message = ref(&#123;</span><br><span class="line">  h:&#123;</span><br><span class="line">    n:&#123;</span><br><span class="line">      age:18</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">let message2 = reactive(&#123;</span><br><span class="line">  h:&#123;</span><br><span class="line">    n:&#123;</span><br><span class="line">      age:18</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">  </span><br><span class="line">watch(message, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;新的值----&#x27;, newVal);</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    deep:true</span><br><span class="line">&#125;)</span><br><span class="line">watch(message2, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;新的值2----&#x27;, newVal);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="3-只监听对象中的一个属性"><a href="#3-只监听对象中的一个属性" class="headerlink" title="3.只监听对象中的一个属性"></a>3.只监听对象中的一个属性</h5><p>将source写成函数返回值的形式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import &#123; ref, watch,reactive &#125; from &#x27;vue&#x27;</span><br><span class="line"> </span><br><span class="line">let message = ref(&#123;</span><br><span class="line">  h:&#123;</span><br><span class="line">    n:&#123;</span><br><span class="line">      age:18，</span><br><span class="line">      name:&quot;李阳滨&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">watch(（）=&gt;message.h.n.age, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;新的值----&#x27;, newVal);</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    deep:true</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="4-深度监听对象出现的同源问题"><a href="#4-深度监听对象出现的同源问题" class="headerlink" title="4.深度监听对象出现的同源问题"></a>4.深度监听对象出现的同源问题</h5><p>有时候我们使用watch并且添加deep:true深度监听一个对象时候，获取到的newVal和oldVal数据一致，官方一点这种现象叫做：深度监听对象出现的同源问题</p>
<p>其实就是：在遍历(不是替换) 对象或数组时，旧值将与新值相同，因为它们的引用指向同一个对象&#x2F;数组。Vue 不会保留变异之前值的副本；</p>
<h5 id="5-watch返回值"><a href="#5-watch返回值" class="headerlink" title="5.watch返回值"></a>5.watch返回值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//调用stop() 可以停止监听。</span><br><span class="line">const stop = watch(x, (new,old)=&gt;&#123;&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="七-watchEffect"><a href="#七-watchEffect" class="headerlink" title="七.watchEffect"></a>七.watchEffect</h3><h4 id="一-定义-1"><a href="#一-定义-1" class="headerlink" title="(一)定义"></a>(一)定义</h4><p>立即执行传入的一个函数，同时响应式追踪其依赖，并在其依赖变更时重新运行该函数。如果用到message 就只会监听message 就是用到几个监听几个 而且是非惰性会默认调用一次。类似于watch开启了immediate</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let message = ref&lt;string&gt;(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line"> watchEffect(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;message&#x27;, message.value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="二-清除副作用-oninvalidate"><a href="#二-清除副作用-oninvalidate" class="headerlink" title="(二)清除副作用(oninvalidate)"></a>(二)清除副作用(oninvalidate)</h4><p>就是在触发监听之前会调用一个函数可以处理你的逻辑例如:防抖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import &#123; watchEffect, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">let message = ref&lt;string&gt;(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line"> watchEffect((oninvalidate) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;message&#x27;, message.value);</span><br><span class="line">    oninvalidate(()=&gt;&#123; </span><br><span class="line">      //执行一些操作在(触发监听)console.log(&#x27;message&#x27;)之前,默认调用的第一次不会执行</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="三-返回值"><a href="#三-返回值" class="headerlink" title="(三)返回值"></a>(三)返回值</h4><p>与wacth一样,也存在返回值,停止监听</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//调用stop() 可以停止监听</span><br><span class="line">const stop =  watchEffect((oninvalidate) =&gt; &#123;&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="四-一些配置项"><a href="#四-一些配置项" class="headerlink" title="(四)一些配置项"></a>(四)一些配置项</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">watchEffect((oninvalidate) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">&#125;,&#123;</span><br><span class="line">  //pre 组件更新前调用 sync 同步执行 post 组件更新之后执行</span><br><span class="line">  flush:&quot;pre&quot;,</span><br><span class="line">  //调试</span><br><span class="line">  onTrigger()&#123;</span><br><span class="line">    debugger</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="八-组件"><a href="#八-组件" class="headerlink" title="八.组件"></a>八.组件</h3><h4 id="一-局部组件"><a href="#一-局部组件" class="headerlink" title="(一)局部组件"></a>(一)局部组件</h4><p>在vue2中,需要引入,注册</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">//组件中</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;HelloWorld&#x27;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">//使用处</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;HelloWorld/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HelloWorld from &#x27;./components/HelloWorld.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloWorld</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>与vue2不同,vue3中只需要在要使用的地方引入组件.vue文件,在html中即可直接使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//组件中</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    我是组件</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">//使用处</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import hello from &quot;./components/hello.vue&quot;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;hello&gt;&lt;/hello&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="二-全局组件"><a href="#二-全局组件" class="headerlink" title="(二)全局组件"></a>(二)全局组件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//vue3的main.ts中</span><br><span class="line">import &#123; createApp &#125; from &#x27;vue&#x27;</span><br><span class="line">import App from &#x27;./App.vue&#x27;</span><br><span class="line">import Card from &#x27;./components/Card/index.vue&#x27;</span><br><span class="line"></span><br><span class="line">createApp(App).component(&#x27;Card&#x27;,Card).mount(&#x27;#app&#x27;)</span><br><span class="line">然后就可以在想要使用的地方直接使用即可</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="三-递归组件-最好先看后面的props在看这里"><a href="#三-递归组件-最好先看后面的props在看这里" class="headerlink" title="(三)递归组件(最好先看后面的props在看这里)"></a>(三)递归组件(最好先看后面的props在看这里)</h4><p>原理跟我们写js递归是一样的 自己调用自己 通过一个条件来结束递归 否则导致内存泄漏</p>
<p>主要逻辑:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;TreeCom :data=&quot;data&quot;&gt;&lt;/TreeCom&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">import TreeCom from &quot;./components/Tree.vue&quot;</span><br><span class="line"></span><br><span class="line">//父组件通过props传一个可以进行v-for遍历的数组,该数组内部的对象又包括了一个可v-for的数组</span><br><span class="line">type TreeList = &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  children?: TreeList[] | [];</span><br><span class="line">&#125;;</span><br><span class="line">const data = reactive&lt;TreeList[]&gt;([</span><br><span class="line">  &#123;</span><br><span class="line">    name: &quot;no.1&quot;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: &quot;no.1-1&quot;,</span><br><span class="line">        children: [</span><br><span class="line">          &#123;</span><br><span class="line">            name: &quot;no.1-1-1&quot;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: &quot;no.2&quot;,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        name: &quot;no.2-1&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: &quot;no.3&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//子组件(Tree.vue)中,再次递归子组件Tree,当到达递归条件时终止</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-for=&quot;item in data&quot;&gt;</span><br><span class="line">    &#123;&#123; item.name &#125;&#125;</span><br><span class="line">    &lt;Tree v-if=&quot;item?.children?.length&quot; :data=&quot;item?.children&quot;&gt;&lt;/Tree&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; ref, reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">type Tree = &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    icon?: string;</span><br><span class="line">    children?: Tree[] | [];</span><br><span class="line">&#125;</span><br><span class="line">defineProps&lt;&#123;</span><br><span class="line">    data?: any[]</span><br><span class="line">&#125;&gt;()</span><br><span class="line">const clickItem = (item: Tree) =&gt; &#123;</span><br><span class="line">    console.log(item)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="四-动态组件"><a href="#四-动态组件" class="headerlink" title="(四)动态组件"></a>(四)动态组件</h4><p>vue2中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;div&gt;</span><br><span class="line">		&lt;!-- 点击按钮切换显示的组件 --&gt;</span><br><span class="line">		&lt;button @click=&quot;show = &#x27;Left&#x27;&quot;&gt;&lt;/button&gt;</span><br><span class="line">		&lt;button @click=&quot;show = &#x27;Right&#x27;&quot;&gt;&lt;/button&gt;</span><br><span class="line">		&lt;component :is=&quot;show&quot;&gt;&lt;/component&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// 导入组件</span><br><span class="line">	import Left from &#x27;xxx&#x27;</span><br><span class="line">	import Right from &#x27;xxx&#x27;</span><br><span class="line">	</span><br><span class="line">	export default &#123;</span><br><span class="line">		data()&#123;</span><br><span class="line">			// 赋予哪个注册组件名称component就显示哪个组件</span><br><span class="line">			show:&#x27;&#x27;</span><br><span class="line">		&#125;,</span><br><span class="line">		// 注册组件</span><br><span class="line">		components:&#123;Left,Right&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>vue3中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;button @click=&quot;current.currentData = data.x&quot;&gt;</span><br><span class="line">  hello</span><br><span class="line">&lt;/button&gt;</span><br><span class="line">&lt;button @click=&quot;current.currentData = data.y&quot;&gt;</span><br><span class="line">  welcome</span><br><span class="line">&lt;/button&gt;</span><br><span class="line">&lt;KeepAlive&gt;</span><br><span class="line">  &lt;component :is=&quot;current.currentData&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;/KeepAlive&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive, markRaw &#125; from &#x27;vue&#x27;</span><br><span class="line">import hello from &quot;./components/hello.vue&quot;</span><br><span class="line">import welcome from &quot;./components/welcome.vue&quot;</span><br><span class="line"></span><br><span class="line">//加载动态组件</span><br><span class="line">const data = reactive(</span><br><span class="line">  &#123;</span><br><span class="line">    x: markRaw(hello),</span><br><span class="line">    y: markRaw(welcome)</span><br><span class="line">  &#125;,</span><br><span class="line">)</span><br><span class="line">let current = reactive(&#123;</span><br><span class="line">  currentData: data.x</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="五-异步组件-suspense-最好先看后面的具名插槽在看这里"><a href="#五-异步组件-suspense-最好先看后面的具名插槽在看这里" class="headerlink" title="(五)异步组件-suspense(最好先看后面的具名插槽在看这里)"></a>(五)异步组件-suspense(最好先看后面的具名插槽在看这里)</h4><h5 id="1-作用"><a href="#1-作用" class="headerlink" title="1.作用"></a>1.作用</h5><p>在大型项目中，我们可能需要拆分应用为更小的块，并仅在需要时再从服务器加载相关组件。类似实现骨架屏</p>
<h5 id="2-实现"><a href="#2-实现" class="headerlink" title="2.实现"></a>2.实现</h5><p>要展示的组件blockSync.vue,异步组件,借助顶层 <code>await</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;bg-[#fafafa] &quot;&gt;</span><br><span class="line">        &lt;div class=&quot;flex&quot;&gt;</span><br><span class="line">            &lt;img class=&quot;bg-[#00000044] w-50px h-50px rounded-50px&quot; :src=&quot;data.url&quot;/&gt;</span><br><span class="line">            &lt;span class=&quot;w-100px h-20px  ml-20px mt-15px&quot;&gt; &#123;&#123; data.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;hr class=&quot;mt-10px&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;flex w-full flex-wrap&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;w-full h-20px  mt-10px&quot;&gt;作者年龄: &#123;&#123; data.age &#125;&#125;&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;w-full h-20px  my-10px&quot;&gt;作者描述: &#123;&#123;data.desc&#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; ref, reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line"></span><br><span class="line">interface Data &#123;</span><br><span class="line">        name:string,</span><br><span class="line">        age: number,</span><br><span class="line">        url: string,</span><br><span class="line">        desc: string</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">const &#123; data &#125; = await axios.get&lt;Data&gt;(`./data.json`)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>中间过渡组件block.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;bg-[#fafafa] &quot;&gt;</span><br><span class="line">    &lt;div class=&quot;flex&quot;&gt;</span><br><span class="line">        &lt;span class=&quot;bg-[#00000044] w-50px h-50px rounded-50px&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;span class=&quot;w-100px h-20px bg-[#00000044] ml-20px mt-15px&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;hr class=&quot;mt-10px&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;flex w-full flex-wrap&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;w-full h-20px bg-[#00000044] mt-10px&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;w-full h-20px bg-[#00000044] my-10px&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>父组件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h1&gt;测试骨架屏(异步组件-suspense)&lt;/h1&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Suspense&gt;</span><br><span class="line">            &lt;!--具名插槽,名字固定  --&gt;</span><br><span class="line">            &lt;template #default&gt;</span><br><span class="line">               &lt;blockSync&gt;&lt;/blockSync&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">            &lt;template #fallback&gt;</span><br><span class="line">                &lt;block&gt;&lt;/block&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">        &lt;/Suspense&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; ref, reactive, defineAsyncComponent&#125; from &#x27;vue&#x27;</span><br><span class="line">import testSlot from &quot;../components/testSlot.vue&quot;</span><br><span class="line">import block from &quot;../components/block.vue&quot;</span><br><span class="line"></span><br><span class="line">// const blockSync = defineAsyncComponent(()=&gt;import(&#x27;@/components/blockSync.vue&#x27;))</span><br><span class="line"></span><br><span class="line">//完整写法</span><br><span class="line">const blockSync = defineAsyncComponent(&#123;</span><br><span class="line">    // 加载函数</span><br><span class="line">    loader: () =&gt; import(&#x27;@/components/blockSync.vue&#x27;),</span><br><span class="line">    // 加载异步组件时使用的组件</span><br><span class="line">    loadingComponent: block,</span><br><span class="line">    // 加载失败后展示的组件,现在没写</span><br><span class="line">    //errorComponent: ErrorComponent,</span><br><span class="line">    // 展示加载组件前的延迟时间，默认为 200ms</span><br><span class="line">    delay: 200,</span><br><span class="line">    // 如果提供了一个 timeout 时间限制，并超时了</span><br><span class="line">    // 也会显示这里配置的报错组件，默认值是：Infinity</span><br><span class="line">    timeout: 3000</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="六-传送组件-Teleport"><a href="#六-传送组件-Teleport" class="headerlink" title="(六)传送组件-Teleport"></a>(六)传送组件-Teleport</h4><p><code>Teleport</code> Vue 3.0新特性之一。</p>
<p><code>Teleport</code> 是一种能够将我们的模板渲染至指定<code>DOM</code>节点，不受父级<code>style</code>、<code>v-show</code>等属性影响，但<code>data</code>、<code>prop</code>数据依旧能够共用的技术；</p>
<p>主要解决的问题 因为<code>Teleport</code>节点挂载在其他指定的<code>DOM</code>节点下，完全不受父级<code>style</code>样式影响</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;测试传送组件-Teleport&lt;/h1&gt;</span><br><span class="line">  &lt;div class=&quot;relative&quot;&gt;</span><br><span class="line">  </span><br><span class="line">      &lt;Teleport :disabled=&quot;changeTeleport&quot; to=&quot;body&quot;&gt;</span><br><span class="line">      &lt;testTeleport&gt;&lt;/testTeleport&gt;</span><br><span class="line">      &lt;/Teleport&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;button @click=&quot;changeTeleport = !changeTeleport&quot;&gt;改变传送&lt;/button&gt;</span><br><span class="line">      &lt;hr&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">import testTeleport from &quot;@/components/testTeleport.vue&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="属性"><a href="#属性" class="headerlink" title="属性:"></a>属性:</h5><p>disabled:控制Teleport是否生效,false为生效</p>
<p>to:控制组件传送至哪里,参数为css选择器</p>
<h4 id="七-transition过渡组件"><a href="#七-transition过渡组件" class="headerlink" title="(七)transition过渡组件"></a>(七)transition过渡组件</h4><h5 id="1-基础用法"><a href="#1-基础用法" class="headerlink" title="1.基础用法:"></a>1.基础用法:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;button @click=&#x27;flag = !flag&#x27;&gt;切换&lt;/button&gt;</span><br><span class="line">    &lt;transition name=&#x27;fade&#x27;&gt;</span><br><span class="line">       &lt;div v-if=&#x27;flag&#x27; class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; ref&#125; from &#x27;vue&#x27;</span><br><span class="line">let flag = ref(false)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.box &#123;&#125;</span><br><span class="line">/* 开始过度,在元素被插入之前生效，在元素被插入之后的下一帧移除。 */</span><br><span class="line">.fade-enter-from &#123;&#125;</span><br><span class="line">/* 开始过度中,在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡/动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。 */</span><br><span class="line">.fade-enter-active &#123;&#125;</span><br><span class="line">/* 过度完成,在元素被插入之后下一帧生效 (与v-enter-from一起移除)，在过渡/动画完成之后移除。 */</span><br><span class="line">.fade-enter-to &#123;&#125;</span><br><span class="line">/* 离开的过度 */</span><br><span class="line">.fade-leave-from &#123;&#125;</span><br><span class="line">/* 离开过度中 */</span><br><span class="line">.fade-leave-active &#123;&#125;</span><br><span class="line">/* 离开完成 */</span><br><span class="line">.fade-leave-to &#123;&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>自定义过度时间 单位毫秒</p>
<p>你也可以分别指定进入和离开的持续时间：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition :duration=&quot;1000&quot;&gt;...&lt;/transition&gt;</span><br><span class="line"></span><br><span class="line">&lt;transition :duration=&quot;&#123; enter: 500, leave: 800 &#125;&quot;&gt;...&lt;/transition&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>appear:通过这个属性可以设置初始节点过度 就是页面加载完成就开始动画 对应三个状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">appear-active-class=&quot;&quot;</span><br><span class="line">appear-from-class=&quot;&quot;</span><br><span class="line">appear-to-class=&quot;&quot;</span><br><span class="line">appear</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="2-结合css动画库使用"><a href="#2-结合css动画库使用" class="headerlink" title="2.结合css动画库使用"></a>2.结合css动画库使用</h5><p>自定义类名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">enter-from-class=&quot;e-from&quot;</span><br><span class="line">e-from&#123;&#125;</span><br><span class="line">就是</span><br><span class="line">.fade-enter-from &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><code>enter-from-class</code></li>
<li><code>enter-active-class</code></li>
<li><code>enter-to-class</code></li>
<li><code>leave-from-class</code></li>
<li><code>leave-active-class</code></li>
<li><code>leave-to-class</code></li>
</ul>
<h6 id="1-安装"><a href="#1-安装" class="headerlink" title="1)安装"></a>1)安装</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install animate.css --save</span><br></pre></td></tr></table></figure>

<h6 id="2-使用"><a href="#2-使用" class="headerlink" title="2)使用"></a>2)使用</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//animate.css 4的版本要加上animate__animated</span><br><span class="line">&lt;template&gt;</span><br><span class="line">        &lt;transition</span><br><span class="line">            leave-active-class=&quot;animate__animated animate__bounceInLeft&quot;</span><br><span class="line">            enter-active-class=&quot;animate__animated animate__bounceInRight&quot;</span><br><span class="line">        &gt;</span><br><span class="line">            &lt;div v-if=&quot;flag&quot; class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/transition&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line"> import &#x27;animate.css&#x27;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3-结合js动画库"><a href="#3-结合js动画库" class="headerlink" title="3.结合js动画库"></a>3.结合js动画库</h5><p>过渡组件的八个生命周期,都含el,enter与after还额外多一个done(相当于路由守卫中的next)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">  @before-enter=&quot;beforeEnter&quot; //对应enter-from</span><br><span class="line">  @enter=&quot;enter&quot;//对应enter-active</span><br><span class="line">  @after-enter=&quot;afterEnter&quot;//对应enter-to</span><br><span class="line">  @enter-cancelled=&quot;enterCancelled&quot;//显示过度打断</span><br><span class="line">  @before-leave=&quot;beforeLeave&quot;//对应leave-from</span><br><span class="line">  @leave=&quot;leave&quot;//对应enter-active</span><br><span class="line">  @after-leave=&quot;afterLeave&quot;//对应leave-to</span><br><span class="line">  @leave-cancelled=&quot;leaveCancelled&quot;//离开过度打断</span><br><span class="line">&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">const beforeEnter = (el: Element) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;进入之前from&#x27;, el);</span><br><span class="line">&#125;</span><br><span class="line">const Enter = (el: Element,done:Function) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;过度曲线&#x27;);</span><br><span class="line">    setTimeout(()=&gt;&#123;</span><br><span class="line">       done()</span><br><span class="line">    &#125;,3000)</span><br><span class="line">&#125;</span><br><span class="line">const AfterEnter = (el: Element) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;to&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;script/&gt;</span><br></pre></td></tr></table></figure>

<h6 id="1-安装-1"><a href="#1-安装-1" class="headerlink" title="1)安装"></a>1)安装</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i gsap --sava</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="2）使用"><a href="#2）使用" class="headerlink" title="2）使用"></a>2）使用</h6><p>可以实现从一个0px的div经过3秒,从x&#x3D;0移到x&#x3D;300的100px的div,消失就是反过来</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;测试gsap&lt;/h2&gt;</span><br><span class="line">&lt;button @click=&#x27;flags = !flags&#x27;&gt;切换&lt;/button&gt;</span><br><span class="line">&lt;transition </span><br><span class="line">  @before-enter=&quot;beforeEnter&quot; </span><br><span class="line">  @enter=&quot;enter&quot; </span><br><span class="line">  @leave=&quot;leave&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;div v-if=&quot;!flags&quot; class=&quot;box&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/transition&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import gsap from &#x27;gsap&#x27;</span><br><span class="line"></span><br><span class="line">let flags = ref(true)</span><br><span class="line">const beforeEnter = (el: Element) =&gt; &#123;</span><br><span class="line">    gsap.set(el,&#123;</span><br><span class="line">        width:0,</span><br><span class="line">        height:0</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">const enter = (el: Element, done: gsap.Callback) =&gt; &#123;</span><br><span class="line">    gsap.to(el, &#123;</span><br><span class="line">        width: 100,</span><br><span class="line">        height: 100,</span><br><span class="line">        duration: 3,</span><br><span class="line">        x: 300,</span><br><span class="line">        onComplete:done</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">const leave = (el: Element, done: gsap.Callback) =&gt; &#123;</span><br><span class="line">    gsap.to(el, &#123;</span><br><span class="line">        width: 0,</span><br><span class="line">        height: 0,</span><br><span class="line">        duration: 3,</span><br><span class="line">        x: 0,</span><br><span class="line">        onComplete: done</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;script/&gt;</span><br></pre></td></tr></table></figure>

<h4 id="八-gsap简单应用"><a href="#八-gsap简单应用" class="headerlink" title="(八)gsap简单应用"></a>(八)gsap简单应用</h4><h5 id="1-参数简单简绍"><a href="#1-参数简单简绍" class="headerlink" title="1.参数简单简绍"></a>1.参数简单简绍</h5><ul>
<li>gsap.to</li>
</ul>
<p>to(选择器，状态对象) 是指从<strong>原有</strong>状态 变化成参数里的<strong>状态对象</strong></p>
<ul>
<li>gsap.from</li>
</ul>
<p>from(选择器，状态对象) 是指从参数里的<strong>状态对象</strong>表现的状态 回归成<strong>现有</strong>的状态</p>
<ul>
<li>gsap.fromTo</li>
</ul>
<p>fromTo(选择器，状态对象A，状态对象B)是指从<strong>状态B</strong>，回归到<strong>状态A</strong></p>
<h5 id="2-动画状态"><a href="#2-动画状态" class="headerlink" title="2.动画状态"></a>2.动画状态</h5><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>释义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>delay: 2</td>
<td>延时播放，单位s</td>
</tr>
<tr>
<td>duration: 3</td>
<td>动画持续时间，单位s</td>
</tr>
<tr>
<td>repeat: 3</td>
<td>动画重复播放的次数</td>
</tr>
<tr>
<td>repeatDelay： 3</td>
<td>重复播放间隔时间，单位s</td>
</tr>
<tr>
<td>yoyo: false</td>
<td>如果true，动画将在每次重复时向前和向后交替</td>
</tr>
<tr>
<td>paused: true</td>
<td>true 暂停播放动画</td>
</tr>
</tbody></table>
<hr>
<h5 id="3-运动方式"><a href="#3-运动方式" class="headerlink" title="3.运动方式"></a>3.运动方式</h5><table>
<thead>
<tr>
<th><strong>参数</strong></th>
<th><strong>相对应的CSS</strong></th>
</tr>
</thead>
<tbody><tr>
<td>x: 100</td>
<td>transform: translateX(100px)</td>
</tr>
<tr>
<td>y: 100</td>
<td>transform: translateY(100px)</td>
</tr>
<tr>
<td>rotation: 360</td>
<td>transform: rotate(360deg)</td>
</tr>
<tr>
<td>rotationX: 360</td>
<td>transform: rotateX(360deg)</td>
</tr>
<tr>
<td>rotationY: 360</td>
<td>transform: rotateY(360deg)</td>
</tr>
<tr>
<td>skewX: 45</td>
<td>transform: skewX(45deg)</td>
</tr>
<tr>
<td>skewY: 45</td>
<td>transform: skewY(45deg)</td>
</tr>
<tr>
<td>scale: 2</td>
<td>transform: scale(2, 2)</td>
</tr>
<tr>
<td>scaleX: 2</td>
<td>transform: scaleX(2)</td>
</tr>
<tr>
<td>scaleY: 2</td>
<td>transform: scaleY(2)</td>
</tr>
<tr>
<td>xPercent: -50</td>
<td>transform: translateX(-50%)</td>
</tr>
<tr>
<td>yPercent: -50</td>
<td>transform: translateY(-50%)</td>
</tr>
<tr>
<td>width: 100</td>
<td>width: 100px</td>
</tr>
<tr>
<td>height: ‘10vh’</td>
<td>height: 10vh</td>
</tr>
</tbody></table>
<h5 id="4-回调函数"><a href="#4-回调函数" class="headerlink" title="4.回调函数"></a>4.回调函数</h5><table>
<thead>
<tr>
<th><strong>事件</strong></th>
<th><strong>释义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>onStart</td>
<td>动画开始播放时触发</td>
</tr>
<tr>
<td>onComplete</td>
<td>所有动画播放完毕后调用的函数（如果有repeat，则等所有的循环结束后执行）</td>
</tr>
<tr>
<td>onRepeat</td>
<td>如果有repeat一组动画播放完的回调函数</td>
</tr>
<tr>
<td>onUpdate</td>
<td>动画运动过程中的回调函数</td>
</tr>
<tr>
<td>onReverseComplete</td>
<td>触发reverse后回到起点时触发</td>
</tr>
</tbody></table>
<h5 id="5-常见的Getter-x2F-Setter-方法"><a href="#5-常见的Getter-x2F-Setter-方法" class="headerlink" title="5.常见的Getter &#x2F; Setter 方法"></a>5.常见的Getter &#x2F; Setter 方法</h5><p>不传参是Getter 传参是Setter</p>
<p>gasp.to 等执行后会返回一个 <strong>tween</strong> 实例。它有一些 api 可以控制动画的进行，比如：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">tween</span> = gsap.<span class="title function_ invoke__">to</span>(<span class="string">&#x27;.target&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">300</span>,</span><br><span class="line">  <span class="attr">duration</span>: <span class="number">3</span></span><br><span class="line">&#125;)</span><br><span class="line">console.<span class="title function_ invoke__">log</span>(tween.<span class="title function_ invoke__">duration</span>()) <span class="comment">// 相当于Getter 获取当前动画总共需要执行3秒</span></span><br><span class="line">tween.<span class="title function_ invoke__">duration</span>(<span class="number">1</span>)</span><br><span class="line">复制代码</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上述代码，原先动画的执行时间是 <code>duration: 3</code> 需要3秒才能完成动画的播放</p>
<p>但通过设置了<code>tween.duration(1)</code>后，动画<strong>总时长</strong>只执行了<strong>1秒</strong></p>
<table>
<thead>
<tr>
<th><strong>api</strong></th>
<th><strong>释义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>time</td>
<td>从哪个时刻开始执行动画，单位是秒</td>
</tr>
<tr>
<td>progress</td>
<td>从哪个进度开始，参数是 0 ~ 1</td>
</tr>
<tr>
<td>duration</td>
<td>更改整体动画时间，参数是期望的动画的总时间</td>
</tr>
<tr>
<td>delay</td>
<td>延时几秒后执行动画，参数是秒</td>
</tr>
<tr>
<td>timeScale</td>
<td>动画播放速度，数值越大，播放速度越快修改后的播放时间 &#x3D; 原播放总时长 &#x2F; timeScale</td>
</tr>
</tbody></table>
<h5 id="6-控制动画"><a href="#6-控制动画" class="headerlink" title="6.控制动画"></a>6.控制动画</h5><p>通过返回的实例控制播放</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">tween</span> = gsap.<span class="title function_ invoke__">to</span>(<span class="string">&#x27;.green&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">duration</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">x</span>: <span class="number">750</span>,</span><br><span class="line">  <span class="attr">rotation</span>: <span class="number">360</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="title function_ invoke__">setTimeout</span>(() =&gt; &#123;</span><br><span class="line">  tween.<span class="title function_ invoke__">pause</span>()</span><br><span class="line">&#125;, <span class="number">2000</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上述动画原本会持续<strong>4秒，2秒</strong>过后，触发了 <code>tween.pause()</code> 动画暂停</p>
<table>
<thead>
<tr>
<th><strong>api</strong></th>
<th><strong>释义</strong></th>
</tr>
</thead>
<tbody><tr>
<td>play</td>
<td>播放</td>
</tr>
<tr>
<td>pause</td>
<td>暂停</td>
</tr>
<tr>
<td>resume</td>
<td>继续播放，只能继pause之后播放</td>
</tr>
<tr>
<td>reverse</td>
<td>回退到起始点</td>
</tr>
<tr>
<td>restart</td>
<td>从头开始播放</td>
</tr>
<tr>
<td>kill</td>
<td>直接暂停并销毁实例，后续无法重新播放</td>
</tr>
</tbody></table>
<h5 id="7-gsap-timeline-时间轴"><a href="#7-gsap-timeline-时间轴" class="headerlink" title="7.gsap.timeline 时间轴"></a>7.gsap.timeline 时间轴</h5><p>同<code>to</code>、<code>from</code>、<code>fromTo</code>不同的是，前者是控制单个元素动画，而<code>timeline</code>是编写<strong>一组</strong>动画，直接来一个官方示例</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tl = gsap.<span class="title function_ invoke__">timeline</span>(&#123;<span class="attr">defaults</span>: &#123;<span class="attr">duration</span>: <span class="number">1</span>&#125;&#125;);</span><br><span class="line"><span class="comment">//no more repitition of duration: 1!</span></span><br><span class="line">tl.<span class="title function_ invoke__">to</span>(<span class="string">&quot;.green&quot;</span>, &#123;<span class="attr">x</span>: <span class="number">200</span>&#125;)</span><br><span class="line">  .<span class="title function_ invoke__">to</span>(<span class="string">&quot;.orange&quot;</span>, &#123;<span class="attr">duration</span>: <span class="number">3</span>, <span class="attr">x</span>: <span class="number">200</span>, <span class="attr">scale</span>: <span class="number">0.2</span>&#125;)</span><br><span class="line">  .<span class="title function_ invoke__">to</span>(<span class="string">&quot;.grey&quot;</span>, &#123;<span class="attr">x</span>: <span class="number">200</span>, <span class="attr">scale</span>: <span class="number">2</span>, <span class="attr">y</span>: <span class="number">20</span>&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>timeline</code>会返回一个实例，可以使用上述的<code>to</code>、<code>from</code>、<code>fromTo</code>。支持链式编程。将单个动画连贯成一组动画，动画的执行顺序就是编写的顺序。</p>
<p>不同的是，<code>timeline</code> 只接受一个<strong>Object</strong>参数，只可以使用前边说到的 <strong>动画状态</strong> 和 <strong>回调函数 。</strong> 但也有一定的区别比如对<code>timeline</code>设置了<code>duration</code>并不是设置了这个动画组的<strong>整体运动时间</strong>，而是相当于增加了一定的<strong>延时播放时间</strong>。而继续添加<code>delay</code>则是延时时间是两者相加之和。</p>
<h6 id="1-defaults默认参数"><a href="#1-defaults默认参数" class="headerlink" title="1)defaults默认参数"></a>1)defaults默认参数</h6><p>因为是动画组，见上述代码提供了<code>defaults</code>参数，接受前边说到的 <strong>运动方式</strong> ，相当于动画组的 <strong>默认值 。</strong> 如果单个动画本本身设置了，就会像<code>.orange</code> 以自身<code>duration: 3</code>的为准，</p>
<h6 id="2-位置参数"><a href="#2-位置参数" class="headerlink" title="2)位置参数"></a>2)位置参数</h6><p><code>timeline</code>返回的实例，使用<code>to</code>、<code>from</code>、<code>fromTo</code>的时候，有第三个参数，位置参数，已知有三种形式。</p>
<p>1）数字 延迟几秒后执行</p>
<p>2）公式 ‘+&#x3D;10’ &#x3D;&#x3D;&gt; duration +&#x3D; 10</p>
<p>3）位置参数：配合addLabel</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">tl</span> = gsap.<span class="title function_ invoke__">timeline</span>(&#123; <span class="attr">defaults</span>: &#123; <span class="attr">duration</span>: <span class="number">1</span> &#125; &#125;)</span><br><span class="line">tl.<span class="title function_ invoke__">to</span>(<span class="string">&#x27;.green&#x27;</span>, &#123; <span class="attr">x</span>: <span class="number">200</span> &#125;)</span><br><span class="line">   .<span class="title function_ invoke__">addLabel</span>(<span class="string">&#x27;label&#x27;</span>) <span class="comment">// 增加位置标记</span></span><br><span class="line">   .<span class="title function_ invoke__">to</span>(<span class="string">&#x27;.orange&#x27;</span>, &#123; <span class="attr">x</span>: <span class="number">200</span>, <span class="attr">scale</span>: <span class="number">0.2</span> &#125;, <span class="string">&#x27;-=1&#x27;</span>) <span class="comment">// 提前 1s 执行</span></span><br><span class="line">   .<span class="title function_ invoke__">to</span>(<span class="string">&#x27;.orange&#x27;</span>, &#123; <span class="attr">y</span>: <span class="number">200</span> &#125;, <span class="string">&#x27;+=1&#x27;</span>) <span class="comment">// 延时1s</span></span><br><span class="line">   .<span class="title function_ invoke__">to</span>(<span class="string">&#x27;.grey&#x27;</span>, &#123; <span class="attr">x</span>: <span class="number">200</span>, <span class="attr">scale</span>: <span class="number">2</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;, <span class="number">6</span>) <span class="comment">// 额外延时6s</span></span><br><span class="line">   .<span class="title function_ invoke__">to</span>(<span class="string">&#x27;.pink&#x27;</span>, &#123; <span class="attr">x</span>: <span class="number">200</span>, <span class="attr">scale</span>: <span class="number">2</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;, <span class="string">&#x27;label&#x27;</span>) <span class="comment">// 存在标记，在标记处执行</span></span><br><span class="line">复制代码</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="8-gsap-getProperty"><a href="#8-gsap-getProperty" class="headerlink" title="8.gsap.getProperty"></a>8.gsap.getProperty</h5><p>获取DOM元素的已有属性</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gsap.<span class="built_in">getProperty</span>(<span class="string">&quot;#id&quot;</span>, <span class="string">&quot;width&quot;</span>) <span class="comment">// 200</span></span><br><span class="line">复制代码</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="九-transition-group组件"><a href="#九-transition-group组件" class="headerlink" title="(九)transition-group组件"></a>(九)transition-group组件</h4><h5 id="1-作用-1"><a href="#1-作用-1" class="headerlink" title="1.作用"></a>1.作用</h5><p>可以同时为多个元素(v-for遍历的元素)添加过渡特效</p>
<ul>
<li>内部元素<strong>总是需要</strong>提供唯一的 <code>key</code> attribute 值。</li>
<li>CSS 过渡的类将会应用在内部的元素中，而不是这个组&#x2F;容器本身。</li>
</ul>
<h5 id="2-使用-1"><a href="#2-使用-1" class="headerlink" title="2.使用"></a>2.使用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=&#x27;Push&#x27;&gt;加一&lt;/button&gt;</span><br><span class="line">&lt;button @click=&#x27;Pop&#x27;&gt;减一&lt;/button&gt;</span><br><span class="line">&lt;div class=&quot;flex flex-wrap&quot;&gt;</span><br><span class="line">   &lt;transition-group  </span><br><span class="line">      leave-active-class=&quot;animate__animated animate__hinge&quot;</span><br><span class="line">      enter-active-class=&quot;animate__animated animate__rotateInUpRight&quot;&gt;</span><br><span class="line">      &lt;div style=&quot;margin: 10px;&quot; :key=&quot;item&quot; v-for=&quot;item in list&quot; &gt;&#123;&#123; item &#125;&#125;&lt;/div&gt;</span><br><span class="line">   &lt;/transition-group&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">const list = reactive&lt;number[]&gt;([0, 1, 2, 4, 5, 6, 7, 8, 9])</span><br><span class="line">const Push = () =&gt; &#123;</span><br><span class="line">    list.push(list.length+1)</span><br><span class="line">&#125;</span><br><span class="line">const Pop = () =&gt; &#123;</span><br><span class="line">    list.pop()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3-列表的移动过渡"><a href="#3-列表的移动过渡" class="headerlink" title="3.列表的移动过渡"></a>3.列表的移动过渡</h5><p>transition-group组件还有一个特殊之处。除了进入和离开，它还可以为定位的改变添加动画。只需了解新增的 v-move 类就可以使用这个新功能，它会应用在元素改变定位的过程中。像之前的类名一样，它的前缀可以通过 name attribute 来自定义，也可以通过 move-class attribute 手动设置</p>
<p>下面代码很酷炫:可以实现数字的随机排列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;button @click=&quot;shuffle&quot;&gt;Shuffle&lt;/button&gt;</span><br><span class="line">        //tag :在外层添加一个结构</span><br><span class="line">        &lt;transition-group class=&quot;wraps&quot; name=&quot;mmm&quot; tag=&quot;ul&quot;&gt;</span><br><span class="line">            &lt;li class=&quot;cell&quot; v-for=&quot;item in items&quot; :key=&quot;item.id&quot;&gt;&#123;&#123; item.number &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/transition-group&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup  lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import _ from &#x27;lodash&#x27;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">let items = ref(Array.apply(null, &#123; length: 81 &#125; as number[]).map((_, index) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        id: index,</span><br><span class="line">        number: (index % 9) + 1</span><br><span class="line">    &#125;</span><br><span class="line">&#125;))</span><br><span class="line">const shuffle = () =&gt; &#123;</span><br><span class="line">    items.value = _.shuffle(items.value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">.wraps &#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-wrap: wrap;</span><br><span class="line">    width: calc(25px * 10 + 9px);</span><br><span class="line">    .cell &#123;</span><br><span class="line">        width: 25px;</span><br><span class="line">        height: 25px;</span><br><span class="line">        border: 1px solid #ccc;</span><br><span class="line">        list-style-type: none;</span><br><span class="line">        display: flex;</span><br><span class="line">        justify-content: center;</span><br><span class="line">        align-items: center;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">.mmm-move &#123;</span><br><span class="line">    transition: transform 0.8s ease;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="十生命周期"><a href="#十生命周期" class="headerlink" title="十生命周期"></a>十生命周期</h3><p>组件的生命周期:简单来说就是一个组件从创建 到 销毁的 过程 成为生命周期</p>
<h4 id="1-beforeCreate-created"><a href="#1-beforeCreate-created" class="headerlink" title="1.beforeCreate,created"></a>1.beforeCreate,created</h4><p>在我们使用Vue3组合式API 是没有 <code>beforeCreate 和 created 这两个生命周期的</code>,包含在setup内</p>
<h4 id="2-onBeforeMount-x3D-gt"><a href="#2-onBeforeMount-x3D-gt" class="headerlink" title="2.onBeforeMount(()&#x3D;&gt;{})"></a>2.onBeforeMount(()&#x3D;&gt;{})</h4><p>在组件DOM实际渲染安装之前调用。在这一步中，根元素还不存在。</p>
<h4 id="3-onMounted-x3D-gt"><a href="#3-onMounted-x3D-gt" class="headerlink" title="3.onMounted(()&#x3D;&gt;{})"></a>3.onMounted(()&#x3D;&gt;{})</h4><p>在组件的第一次渲染后调用，该元素现在可用，允许直接DOM访问</p>
<h4 id="4-onBeforeUpdate-x3D-gt"><a href="#4-onBeforeUpdate-x3D-gt" class="headerlink" title="4.onBeforeUpdate(()&#x3D;&gt;{})"></a>4.onBeforeUpdate(()&#x3D;&gt;{})</h4><p>数据更新时调用，发生在虚拟 DOM 打补丁之前。</p>
<h4 id="5-onUpdated-x3D-gt"><a href="#5-onUpdated-x3D-gt" class="headerlink" title="5.onUpdated(()&#x3D;&gt;{})"></a>5.onUpdated(()&#x3D;&gt;{})</h4><p>DOM更新后，updated的方法即会调用。</p>
<h4 id="6-onBeforeUnmount-x3D-gt"><a href="#6-onBeforeUnmount-x3D-gt" class="headerlink" title="6.onBeforeUnmount(()&#x3D;&gt;{})"></a>6.onBeforeUnmount(()&#x3D;&gt;{})</h4><p>在卸载组件实例之前调用。在这个阶段，实例仍然是完全正常的。</p>
<h4 id="7-onUnmounted-x3D-gt"><a href="#7-onUnmounted-x3D-gt" class="headerlink" title="7.onUnmounted(()&#x3D;&gt;{})"></a>7.onUnmounted(()&#x3D;&gt;{})</h4><p>卸载组件实例后调用。调用此钩子时，组件实例的所有指令都被解除绑定，所有事件侦听器都被移除，所有子组件实例被卸载。onRenderTracked() 状态跟踪</p>
<h4 id="8-onRenderTracked-x3D-gt"><a href="#8-onRenderTracked-x3D-gt" class="headerlink" title="8.onRenderTracked(()&#x3D;&gt;{})"></a>8.onRenderTracked(()&#x3D;&gt;{})</h4><p>直译过来就是状态跟踪，会跟踪页面上所有的方法跟变量，也就是我们return返回的属性与方法，它都会进行跟踪。当页面有update时，会生成一个event对象。我们可以通过这个event&#96;对象查看程序的问题所在。</p>
<h4 id="9-onRenderTriggered-x3D-gt"><a href="#9-onRenderTriggered-x3D-gt" class="headerlink" title="9.onRenderTriggered(()&#x3D;&gt;{})"></a>9.onRenderTriggered(()&#x3D;&gt;{})</h4><p><code>onRenderTriggered</code>直译过来是状态触发，它不会跟踪每一个值，而是给你变化值的信息，并且新值和旧值都会给你明确的展示出来。</p>
<h4 id="10-onActivated与onDeactivated"><a href="#10-onActivated与onDeactivated" class="headerlink" title="10.onActivated与onDeactivated"></a>10.onActivated与onDeactivated</h4><ul>
<li>当组件被激活时，会自动触发组件的 onActivated生命周期函数；</li>
<li>当组件被缓存时，会自动触发组件的 onDeactivated生命周期函数；</li>
</ul>
<p>都需要将组件写到<KeepAlive></KeepAlive>中才能使用以上两个生命周期钩子函数,而且注意<KeepAlive></KeepAlive>组件中只能写一个存在的节点(v-if为真的节点)</p>
<p>开启keep-alive 生命周期的变化:</p>
<ul>
<li>初次进入时： onMounted&gt; onActivated</li>
<li>退出后触发 onDeactivated</li>
<li>再次进入：<br>只会触发 onActivated<br>事件挂载的方法等，只执行一次的放在 onMounted中；组件每次进去执行的方法放在 onActivated中</li>
</ul>
<h3 id="十-父子组件间传值"><a href="#十-父子组件间传值" class="headerlink" title="十.父子组件间传值"></a>十.父子组件间传值</h3><h4 id="一-父传子-props"><a href="#一-父传子-props" class="headerlink" title="(一)父传子:props"></a>(一)父传子:props</h4><h5 id="1-注意"><a href="#1-注意" class="headerlink" title="1..注意:"></a>1..注意:</h5><p>props传来的数据不能更改,若要更改用变量接收后,更改变量</p>
<h5 id="2-使用方法"><a href="#2-使用方法" class="headerlink" title="2..使用方法:"></a>2..使用方法:</h5><h6 id="1-vue2中"><a href="#1-vue2中" class="headerlink" title="1)vue2中"></a>1)vue2中</h6><p>在父组件中:(发送方)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Children name=&quot;jack&quot; age=18 /&gt;  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在子组件中:(接收方)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//单纯接收</span><br><span class="line">props:[&quot;name&quot;,&quot;age&quot;]</span><br><span class="line">//限制类型</span><br><span class="line">props:&#123;name:string,age:Number&#125;</span><br><span class="line">//限制类型,必要性,默认值</span><br><span class="line">props:&#123;</span><br><span class="line">	name:&#123;type:string,required:true,dafault:&quot;老王&quot;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="2-vue3-js中，在ts中也可以这么写但是不优雅"><a href="#2-vue3-js中，在ts中也可以这么写但是不优雅" class="headerlink" title="2)vue3_js中，在ts中也可以这么写但是不优雅"></a>2)vue3_js中，在ts中也可以这么写但是不优雅</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">const prop = defineProps(&#123;</span><br><span class="line">    title:&#123;</span><br><span class="line">        type:String,</span><br><span class="line">        default:&quot;20&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    age:&#123;</span><br><span class="line">        type:Number</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">console.log(prop.title)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="3-vue3-ts中"><a href="#3-vue3-ts中" class="headerlink" title="3)vue3_ts中"></a>3)vue3_ts中</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">//不能添加其他配置</span><br><span class="line">const prop = defineProps&lt;&#123;</span><br><span class="line">    title?:string,</span><br><span class="line">    age?:number </span><br><span class="line">&#125;&gt;()</span><br><span class="line">//添加其他配置,准确讲就是默认值</span><br><span class="line">const prop = withDefaults(defineProps &lt; &#123;</span><br><span class="line">    title?:string,</span><br><span class="line">    age?:number </span><br><span class="line">  &#125;&gt;(),&#123;</span><br><span class="line">    title:&quot;lyb&quot;,</span><br><span class="line">    age:()=&gt;19</span><br><span class="line">  &#125;)</span><br><span class="line">console.log(prop.title)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="二-子传父-自定义事件-与调用子组件方法-属性"><a href="#二-子传父-自定义事件-与调用子组件方法-属性" class="headerlink" title="(二)子传父:自定义事件;与调用子组件方法,属性"></a>(二)子传父:自定义事件;与调用子组件方法,属性</h4><h5 id="1-自定义事件使用方法"><a href="#1-自定义事件使用方法" class="headerlink" title="1.自定义事件使用方法:"></a>1.自定义事件使用方法:</h5><h6 id="1-vue2中-1"><a href="#1-vue2中-1" class="headerlink" title="1)vue2中"></a>1)vue2中</h6><p>在子组件中(发送方)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//触发事件</span><br><span class="line">this.$emit(&quot;add&quot;,this.name)</span><br><span class="line">//解绑事件,this.$off()解绑所有</span><br><span class="line">this.$off(&quot;add&quot;)</span><br></pre></td></tr></table></figure>

<p>在父组件中(接收方)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;Children @add=&quot;cartAdd($event)&quot; /&gt;  </span><br><span class="line">//接收,函数</span><br><span class="line">cartAdd(event,name)&#123;&#125;</span><br></pre></td></tr></table></figure>

<h6 id="2-vue3中"><a href="#2-vue3中" class="headerlink" title="2)vue3中"></a>2)vue3中</h6><p>在子组件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt; </span><br><span class="line">const emit = defineEmits([&#x27;add&#x27;])</span><br><span class="line"> </span><br><span class="line">//如果用了ts可以这样写</span><br><span class="line">// const emit = defineEmits&lt;&#123;</span><br><span class="line">//     (e: &quot;add&quot;, name: string): void</span><br><span class="line">// &#125;&gt;()</span><br><span class="line">const clickTap = () =&gt; &#123;</span><br><span class="line">    emit(&#x27;add&#x27;, &#x27;李阳滨&#x27;)</span><br><span class="line">&#125; </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>在父组件中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Children @add=&quot;cartAdd&quot; /&gt;  </span><br><span class="line">//接收,函数</span><br><span class="line">cartAdd(name)&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="2-父组件调用子组件方法-属性"><a href="#2-父组件调用子组件方法-属性" class="headerlink" title="2.父组件调用子组件方法,属性"></a>2.父组件调用子组件方法,属性</h5><h6 id="1-vue2中-2"><a href="#1-vue2中-2" class="headerlink" title="1)vue2中"></a>1)vue2中</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">//父组件中</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Button @click=&quot;handleClick&quot;&gt;点击调用子组件方法&lt;/Button&gt;</span><br><span class="line">        &lt;Child ref=&quot;childs&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;    </span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Child from &#x27;./child&#x27;;</span><br><span class="line">export default &#123;</span><br><span class="line">    methods: &#123;</span><br><span class="line">        handleClick() &#123;</span><br><span class="line">              this.$refs.childs.sing();</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//子组件中</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    sing() &#123;</span><br><span class="line">      console.log(&#x27;我是子组件的方法&#x27;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="2）vue3中"><a href="#2）vue3中" class="headerlink" title="2）vue3中"></a>2）vue3中</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//父组件中</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;Button @click=&quot;handleClick&quot;&gt;点击调用子组件方法&lt;/Button&gt;</span><br><span class="line">        &lt;Child ref=&quot;childs&quot;/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;    </span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import Child from &#x27;./child&#x27;;</span><br><span class="line"></span><br><span class="line">const childs = ref&lt;InstanceType&lt;typeof Child&gt;&gt;()</span><br><span class="line"></span><br><span class="line">function handleClick() &#123;</span><br><span class="line">  console.log(&quot;父组件中调子组件值&quot;,childs.value?.list)</span><br><span class="line">  childs.value?.sing()</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//子组件中</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; reactive&#125; from &#x27;vue&#x27;</span><br><span class="line">function sing() &#123;</span><br><span class="line">   console.log(&#x27;我是子组件的方法&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">const list = reactive&lt;number[]&gt;([4, 5, 6])</span><br><span class="line"> </span><br><span class="line">defineExpose(&#123;</span><br><span class="line">    list,</span><br><span class="line">    sing</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="三-Bus"><a href="#三-Bus" class="headerlink" title="(三)$Bus"></a>(三)$Bus</h4><p>vue3中$on,$off,$once实例方法已经被移除了,所以EventBus也无法使用了.但是硬是要用可以自己写个发布订阅模式或者使用Mitt这个库.</p>
<p><a target="_blank" rel="noopener" href="https://xiaoman.blog.csdn.net/article/details/125453908">(12条消息) 小满Vue3（Mitt）_vue3 mitt_小满zs的博客-CSDN博客</a></p>
<h5 id="个人观点"><a href="#个人观点" class="headerlink" title="个人观点:"></a>个人观点:</h5><p>能不用$bus就不要用,父子间传值用上面的两个就可以,”祖先”传值用后面的<strong>provide&#x2F;inject</strong>.没有什么关系的组件间用vuex或者pinia都行,至少还好找.用$bus后期别人维护会一脸懵,找也不好找.</p>
<h3 id="十一-插槽"><a href="#十一-插槽" class="headerlink" title="十一.插槽"></a>十一.插槽</h3><p>插槽就是子组件中的提供给父组件使用的一个占位符，用<slot></slot> 表示，父组件可以在这个占位符中填充任何模板代码，如 HTML、组件等，填充的内容会替换子组件的<slot></slot>标签。</p>
<h4 id="一-匿名插槽"><a href="#一-匿名插槽" class="headerlink" title="(一)匿名插槽"></a>(一)匿名插槽</h4><p>1.在子组件放置一个插槽</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">       &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>2.父组件使用插槽</p>
<p>在父组件给这个插槽填充内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">   &lt;template v-slot&gt;</span><br><span class="line">       &lt;div&gt;2132&lt;/div&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">&lt;/Dialog&gt;</span><br></pre></td></tr></table></figure>

<h4 id="二-具名插槽"><a href="#二-具名插槽" class="headerlink" title="(二)具名插槽"></a>(二)具名插槽</h4><p>具名插槽其实就是给插槽取个名字。一个子组件可以放多个插槽，而且可以放在不同的地方，而父组件填充内容时，可以根据这个名字把内容填充到对应插槽中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>父组件使用需对应名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">    &lt;template v-slot:header&gt;</span><br><span class="line">       &lt;div&gt;1&lt;/div&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">   &lt;template v-slot&gt;</span><br><span class="line">       &lt;div&gt;2&lt;/div&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">   &lt;template v-slot:footer&gt;</span><br><span class="line">       &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">&lt;/Dialog&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> 具名插槽简写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;Dialog&gt;</span><br><span class="line">    &lt;template #header&gt;</span><br><span class="line">       &lt;div&gt;1&lt;/div&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">   &lt;template #default&gt;</span><br><span class="line">       &lt;div&gt;2&lt;/div&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">   &lt;template #footer&gt;</span><br><span class="line">       &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">&lt;/Dialog&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="三-作用域插槽"><a href="#三-作用域插槽" class="headerlink" title="(三)作用域插槽"></a>(三)作用域插槽</h4><p>在子组件动态绑定参数 派发给父组件的slot去使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;slot name=&quot;header&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;div v-for=&quot;item in 100&quot;&gt;</span><br><span class="line">            &lt;slot :data=&quot;item&quot;&gt;&lt;/slot&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"> </span><br><span class="line">    &lt;slot name=&quot;footer&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>通过结构方式取值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> &lt;Dialog&gt;</span><br><span class="line">    &lt;template #header&gt;</span><br><span class="line">        &lt;div&gt;1&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #default=&quot;&#123; data &#125;&quot;&gt;</span><br><span class="line">        &lt;div&gt;&#123;&#123; data &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template #footer&gt;</span><br><span class="line">        &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/Dialog&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="四-动态插槽"><a href="#四-动态插槽" class="headerlink" title="(四)动态插槽"></a>(四)动态插槽</h4><p>具名插槽的插槽名可以是一个变量名,这样实现动态效果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Dialog&gt;</span><br><span class="line">      &lt;template #[name]&gt;</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">              23</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">  &lt;/Dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">  const name = ref(&#x27;header&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="十二-依赖注入Provide-x2F-Inject"><a href="#十二-依赖注入Provide-x2F-Inject" class="headerlink" title="十二.依赖注入Provide &#x2F; Inject"></a>十二.依赖注入Provide &#x2F; Inject</h3><h4 id="一-作用"><a href="#一-作用" class="headerlink" title="(一)作用"></a>(一)作用</h4><p>通常，当我们需要从父组件向子组件传递数据时，我们使用 <a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/component-props.html">props</a>。想象一下这样的结构：有一些深度嵌套的组件，而深层的子组件只需要父组件的部分内容。在这种情况下，如果仍然将 prop 沿着组件链逐级传递下去，可能会很麻烦。</p>
<p>而provide 可以在祖先组件中指定我们想要<strong>提供</strong>给后代组件的数据或方法，而在任何后代组件中，我们都可以使用 inject 来接收 provide <strong>提供</strong>的数据或方法。 </p>
<h4 id="二-使用-1"><a href="#二-使用-1" class="headerlink" title="(二)使用"></a>(二)使用</h4><p>父组件传递数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; provide, ref, readonly &#125; from &#x27;vue&#x27;</span><br><span class="line">import A from &#x27;./components/A.vue&#x27;</span><br><span class="line"></span><br><span class="line">let flag = ref&lt;number&gt;(1)</span><br><span class="line">//可以设置成不能修改的,应为子组件修改,父组件的值也会跟着改</span><br><span class="line">//provide(&#x27;flag&#x27;, flag)</span><br><span class="line">provide(&#x27;flag&#x27;, readonly(flag)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>子组件接受</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; inject, Ref, ref &#125; from &#x27;vue&#x27;</span><br><span class="line">//声明接收的是一个ref类型的.赋了一个默认值ref(1),为了避免后续应用ts报错</span><br><span class="line">const flag = inject&lt;Ref&lt;number&gt;&gt;(&#x27;flag&#x27;, ref(1))</span><br><span class="line">const change = () =&gt; &#123;</span><br><span class="line">    flag.value = 2</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="十三-tsx"><a href="#十三-tsx" class="headerlink" title="十三.tsx"></a>十三.tsx</h3><h4 id="一-安装插件"><a href="#一-安装插件" class="headerlink" title="(一)安装插件"></a>(一)安装插件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install @vitejs/plugin-vue-jsx -D</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="二-修改vite-config-ts配置"><a href="#二-修改vite-config-ts配置" class="headerlink" title="(二)修改vite.config.ts配置"></a>(二)修改vite.config.ts配置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import vue from &#x27;@vitejs/plugin-vue&#x27;</span><br><span class="line">import vueJsx from &#x27;@vitejs/plugin-vue-jsx&#x27;;</span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">  plugins: [vue(),vueJsx()]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="三-修改tsconfig-json-配置文件"><a href="#三-修改tsconfig-json-配置文件" class="headerlink" title="(三)修改tsconfig.json 配置文件"></a>(三)修改tsconfig.json 配置文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;jsx&quot;: &quot;preserve&quot;,</span><br><span class="line">&quot;jsxFactory&quot;: &quot;h&quot;,</span><br><span class="line">&quot;jsxFragmentFactory&quot;: &quot;Fragment&quot;,</span><br></pre></td></tr></table></figure>

<h4 id="（四）新建xxx-tsx文件"><a href="#（四）新建xxx-tsx文件" class="headerlink" title="（四）新建xxx.tsx文件"></a>（四）新建xxx.tsx文件</h4><p>三种写法:</p>
<h5 id="1-直接写"><a href="#1-直接写" class="headerlink" title="1.直接写"></a>1.直接写</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">export default function()&#123;</span><br><span class="line">    return (&lt;h2&gt;测试一下tsx写法一&lt;/h2&gt;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//在父组件中当作子组件引入直接使用即可</span><br></pre></td></tr></table></figure>

<h5 id="2-vue2写法"><a href="#2-vue2写法" class="headerlink" title="2.vue2写法"></a>2.vue2写法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineComponent &#125; from &quot;vue&quot;;</span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            age:18</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (&lt;h2&gt;测试tsx写法二&#123;this.age&#125;&lt;/h2&gt;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="3-vue3写法"><a href="#3-vue3写法" class="headerlink" title="3.vue3写法"></a>3.vue3写法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">//v-bind &#123;&#125;</span><br><span class="line">//v-model v-model=&#123;&#125;</span><br><span class="line">//v-show 支持</span><br><span class="line">//v-if 不支持,使用三元表达式代替</span><br><span class="line">//v-for 不支持,使用map代替</span><br><span class="line">//v-on 改为onClick</span><br><span class="line">//prop与emit </span><br><span class="line"></span><br><span class="line">interface Props &#123;</span><br><span class="line">    name?: string</span><br><span class="line">&#125;</span><br><span class="line">import &#123; defineComponent, ref &#125; from &quot;vue&quot;</span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">    props:&#123;</span><br><span class="line">        name: String</span><br><span class="line">    &#125;,</span><br><span class="line">    emits:[&#x27;lang&#x27;],</span><br><span class="line">    setup(props:Props, &#123;emit&#125;) &#123;</span><br><span class="line">        let num = ref(&#x27;&#x27;)</span><br><span class="line">        const test = function()&#123;</span><br><span class="line">            console.log(&quot;测试&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">        const fn = function(item:any)&#123;</span><br><span class="line">            console.log(&quot;测试emit&quot;,item)</span><br><span class="line">            emit(&quot;lang&quot;,item)</span><br><span class="line">        &#125;</span><br><span class="line">        let arr = [1, 2, 3, 4, 5]</span><br><span class="line">        return () =&gt; (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;h2&gt;测试tsx写法三&lt;/h2&gt;</span><br><span class="line">                &lt;input v-model=&#123;num.value&#125; type=&quot;text&quot;&gt;&lt;/input&gt;</span><br><span class="line">                &lt;div&gt;&#123;num.value&#125;&lt;/div&gt;</span><br><span class="line">                &lt;div v-show=&#123;true&#125;&gt;show&lt;/div&gt;</span><br><span class="line">                &#123;num.value ? &lt;div&gt;景天&lt;/div&gt; : &lt;div&gt;雪见&lt;/div&gt;&#125;</span><br><span class="line">                &#123;</span><br><span class="line">                arr.map(v =&gt; &#123;</span><br><span class="line">                	//下面为什么不能直接写fn(v)而要写成函数柯里化()=&gt;fn(v)的形式</span><br><span class="line">                	//如果你直接写成fn,不需要传参可以不使用,但是需要传参就要写成fn()的形式.直接会在编译的阶段就执行一次,所以要写成函数柯里化()=&gt;fn(v)的形式</span><br><span class="line">                    return &lt;div onClick=&#123;()=&gt;fn(v)&#125;&gt;$&#123;v&#125;&lt;/div&gt;</span><br><span class="line">                &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">                &lt;button onClick=&#123;test&#125;&gt;测试点击事件&lt;/button&gt;</span><br><span class="line">                &lt;div&gt;props:&#123;props.name&#125;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="十四-深入理解v-modle"><a href="#十四-深入理解v-modle" class="headerlink" title="十四.深入理解v-modle"></a>十四.深入理解v-modle</h3><p>在vue3中,v-model同样可以为<strong>表单元素</strong>添加双向绑定,同时也可以为<strong>自定义组件</strong>实现数据的双向绑定</p>
<p>在组件上的v-modle其实是一个语法糖 通过props 和 emit组合而成的(不过我试了下provide也可以实现数据的双向绑定…)</p>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用:"></a>使用:</h4><h5 id="单个"><a href="#单个" class="headerlink" title="单个:"></a>单个:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//父组件中</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Dialog v-model=&quot;show&quot;&gt;&lt;/Dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import Dialog from &quot;./components/Dialog/index.vue&quot;;</span><br><span class="line">const show = ref(false)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//子组件中,props接收的变量名默认为modelValue,emit自定义事件名默认为update:modelValue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-if=&#x27;modelValue&#x27;&gt;</span><br><span class="line">       &lt;div @click=&quot;close&quot;&gt;</span><br><span class="line">        x</span><br><span class="line">       &lt;/div&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">type Props = &#123;</span><br><span class="line">    modelValue: boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const propData = defineProps&lt;Props&gt;()</span><br><span class="line"></span><br><span class="line">const emit = defineEmits([&#x27;update:modelValue&#x27;])</span><br><span class="line"></span><br><span class="line">const close = () =&gt; &#123;</span><br><span class="line">    emit(&#x27;update:modelValue&#x27;, false)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="多个"><a href="#多个" class="headerlink" title="多个:"></a>多个:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//父组件中</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Dialog v-model=&quot;show&quot; v-model:title=&#x27;title&#x27;&gt;         &lt;/Dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import Dialog from &quot;./components/Dialog/index.vue&quot;;</span><br><span class="line">const show = ref(false)</span><br><span class="line">const title = ref(&#x27;我是标题&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-if=&#x27;modelValue&#x27; class=&quot;dialog&quot;&gt;</span><br><span class="line">       &lt;div @click=&quot;close&quot; class=&quot;cursor-pointer&quot;&gt;</span><br><span class="line">        x</span><br><span class="line">       &lt;/div&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">type Props = &#123;</span><br><span class="line">   modelValue:boolean,</span><br><span class="line">   title:string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const propData = defineProps&lt;Props&gt;()</span><br><span class="line"></span><br><span class="line">const emit = defineEmits([&#x27;update:modelValue&#x27;,&#x27;update:title&#x27;])</span><br><span class="line"></span><br><span class="line">const close = () =&gt; &#123;</span><br><span class="line">    emit(&#x27;update:modelValue&#x27;, false)</span><br><span class="line">    emit(&#x27;update:title&#x27;,&#x27;我要改变&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="十五-自定义指令"><a href="#十五-自定义指令" class="headerlink" title="十五.自定义指令"></a>十五.自定义指令</h3><p>与vue2不同,vue3自定义指令的钩子函数有七个(跟vue的生命周期类似):</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">created： 元素初始化的时候</span><br><span class="line">beforeMount： 指令绑定到元素后调用 只调用一次</span><br><span class="line">mounted： 元素插入父级dom调用</span><br><span class="line">beforeUpdate： 元素被更新之前调用</span><br><span class="line">update： 这个周期方法被移除 改用updated</span><br><span class="line">beforeUnmount： 在元素被移除前调用</span><br><span class="line">unmounted： 指令被移除后调用 只调用一次</span><br></pre></td></tr></table></figure>

<h4 id="一-使用"><a href="#一-使用" class="headerlink" title="(一)使用:"></a>(一)使用:</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import type &#123; Directive, DirectiveBinding &#125; from &#x27;vue&#x27;</span><br><span class="line">//变量名必须写成v后面跟大写的形式:vMove</span><br><span class="line">const vMove: Directive = &#123;</span><br><span class="line">  created: (el: any, binding: DirectiveBinding) =&gt; &#123;</span><br><span class="line">    console.log(&quot;初始化====&gt;&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="二-参数解释"><a href="#二-参数解释" class="headerlink" title="(二)参数解释:"></a>(二)参数解释:</h4><h5 id="1-el"><a href="#1-el" class="headerlink" title="1.el"></a>1.el</h5><p> 当前绑定的DOM 元素</p>
<h5 id="2-binding"><a href="#2-binding" class="headerlink" title="2.binding"></a>2.binding</h5><p>instance：使用指令的组件实例。<br>value：传递给指令的值。例如，在 v-my-directive&#x3D;”2” 中，该值为 2。<br>oldValue：先前的值，仅在 beforeUpdate 和 updated 中可用。无论值是否有更改都可用。<br>arg：传递给指令的参数(如果有的话)。例如在 v-my-directive:foo 中，arg 为 “foo”。<br>modifiers：包含修饰符(如果有的话) 的对象。例如在 v-my-directive.foo.bar 中，修饰符对象为 {foo: true，bar: true}。<br>dir：一个对象，在注册指令时作为参数传递。</p>
<h4 id="三-简写模式"><a href="#三-简写模式" class="headerlink" title="(三)简写模式:"></a>(三)简写模式:</h4><p>不过一般不会用这么多钩子,一般只会用两个<code>mounted</code> 和 <code>updated</code>,而 <code>mounted</code> 和 <code>updated</code> 时触发相同行为，并且不关心其他的钩子函数。可以写成自定义指令简写方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">//权限判断案例</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button v-has-show=&quot;&#x27;shop:edit&#x27;&quot;&gt;编辑&lt;/button&gt;</span><br><span class="line">    &lt;button v-has-show=&quot;&#x27;shop:create&#x27;&quot;&gt;创建&lt;/button&gt;</span><br><span class="line">    &lt;button v-has-show=&quot;&#x27;shop:delete&#x27;&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import type &#123; ref, Directive &#125; from &#x27;vue&#x27;</span><br><span class="line">//mock后台返回的数据</span><br><span class="line">const permission = [</span><br><span class="line">    &#x27;李阳滨:shop:edit&#x27;,</span><br><span class="line">    // &#x27;李阳滨:shop:create&#x27;,</span><br><span class="line">    &#x27;李阳滨:shop:delete&#x27;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">const userId = &quot;李阳滨&quot;</span><br><span class="line">const vHasShow: Directive&lt;HTMLElement, string&gt; = (el, bingding) =&gt; &#123;</span><br><span class="line">    console.log(&quot; el,bingding&quot;,el,bingding)</span><br><span class="line">    if (!permission.includes(userId + &#x27;:&#x27; + bingding.value)) &#123;</span><br><span class="line">        el.style.display = &#x27;none&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="十六-Hooks"><a href="#十六-Hooks" class="headerlink" title="十六.Hooks"></a>十六.Hooks</h3><p>主要用来处理复用代码逻辑的一些封装，这个在vue2就已经有一个东西是Mixins</p>
<p>mixins就是将这些多个相同的逻辑抽离出来，各个组件只需要引入mixins，就能实现一次写代码，多组件受益的效果。</p>
<h4 id="一-mixins写法"><a href="#一-mixins写法" class="headerlink" title="(一)mixins写法"></a>(一)mixins写法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//mixins/module1.js中</span><br><span class="line">export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            clientX: 0,</span><br><span class="line">            clientY: 0</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">        window.addEventListener(&#x27;mousemove&#x27;, (e) =&gt; &#123;</span><br><span class="line">            this.clientX = e.clientX;</span><br><span class="line">            this.clientY = e.clientY;</span><br><span class="line">        &#125;);</span><br><span class="line">        this.$once(&#x27;hook:beforeDestoryed&#x27;, () =&gt; &#123;</span><br><span class="line">            window.removeEventListener(&#x27;mousemove&#x27;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//组件中</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;X: &#123;&#123; clientX &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Y: &#123;&#123; clientY &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">import module1 from &#x27;@/mixins/module1&#x27;;</span><br><span class="line">export default &#123;</span><br><span class="line">    name: &#x27;A&#x27;,</span><br><span class="line">    mixins: [module1],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h5 id="弊端就是"><a href="#弊端就是" class="headerlink" title="弊端就是:"></a>弊端就是:</h5><p>1.会涉及到覆盖的问题，个人感觉类似于中间件的概念,在执行组件前会执行mixins中的代码,所以mixins中的变量就会被覆盖掉.</p>
<p>2.变量来源不明确（隐式传入），不利于阅读，使代码变得难以维护。类似于上面,如果组件中使用了clientX,根本不好找clientX的来源</p>
<h4 id="二-Hooks写法"><a href="#二-Hooks写法" class="headerlink" title="(二)Hooks写法"></a>(二)Hooks写法</h4><p> hooks是函数的一种写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// 在hooks/useMousePosition.ts</span><br><span class="line">import &#123; ref, onMounted, onUnmounted, Ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">interface MousePosition &#123;</span><br><span class="line">  x: Ref&lt;number&gt;,</span><br><span class="line">  y: Ref&lt;number&gt;</span><br><span class="line">&#125;</span><br><span class="line">function useMousePosition(): MousePosition &#123;</span><br><span class="line">  const x = ref(0)</span><br><span class="line">  const y = ref(0)</span><br><span class="line"></span><br><span class="line">  const updateMouse = (e: MouseEvent) =&gt; &#123;</span><br><span class="line">    x.value = e.pageX</span><br><span class="line">    y.value = e.pageY</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onMounted(() =&gt; &#123;</span><br><span class="line">    document.addEventListener(&#x27;click&#x27;, updateMouse)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  onUnmounted(() =&gt; &#123;</span><br><span class="line">    document.removeEventListener(&#x27;click&#x27;, updateMouse)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  return &#123; x, y &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default useMousePosition</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//在组件中</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;X: &#123;&#123; x &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Y: &#123;&#123; y &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">// 引入hooks</span><br><span class="line">import useMousePosition from &#x27;./hooks/useMousePosition&#x27;</span><br><span class="line">// 使用hooks功能</span><br><span class="line">const &#123; x, y &#125; = useMousePosition()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="三-推荐一个hooks库"><a href="#三-推荐一个hooks库" class="headerlink" title="(三)推荐一个hooks库"></a>(三)推荐一个hooks库</h4><p><a target="_blank" rel="noopener" href="https://vueuse.org/">VueUse | VueUse</a></p>
<p>VueUse 是一个基于 Composition API 的实用函数集合。通俗的来说，这就是一个工具函数包支持了更好的逻辑分离，它可以帮助你快速实现一些常见的功能，免得你自己去写，解决重复的工作内容。以及进行了 Composition API 的封装。</p>
<p>最后说一句,这个库真的牛,像一些节流,防抖,取色器,复制等等函数多有,贼吊.</p>
<h3 id="十七-定义全局函数与变量"><a href="#十七-定义全局函数与变量" class="headerlink" title="十七.定义全局函数与变量"></a>十七.定义全局函数与变量</h3><p>由于Vue3 没有Prototype 属性 使用 app.config.globalProperties 代替 然后去定义变量和函数</p>
<h4 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 之前 (Vue 2.x)</span><br><span class="line">Vue.prototype.$env =  &quot;全局变量&quot;</span><br></pre></td></tr></table></figure>

<h4 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const app = createApp(&#123;&#125;)</span><br><span class="line">app.config.globalProperties.$env = &quot;全局变量&quot;</span><br><span class="line"></span><br><span class="line">//兼容ts</span><br><span class="line">declare module &#x27;vue&#x27;&#123;</span><br><span class="line">    export interface ComponentCustomProperties &#123;</span><br><span class="line">        $env: String</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="十八自定义插件"><a href="#十八自定义插件" class="headerlink" title="十八自定义插件"></a>十八自定义插件</h3><h4 id="实现一个自定义插件实现全局挂载一个组件的效果："><a href="#实现一个自定义插件实现全局挂载一个组件的效果：" class="headerlink" title="实现一个自定义插件实现全局挂载一个组件的效果："></a>实现一个自定义插件实现全局挂载一个组件的效果：</h4><h5 id="（一）被挂载的组件"><a href="#（一）被挂载的组件" class="headerlink" title="（一）被挂载的组件"></a>（一）被挂载的组件</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-if=&quot;isShow&quot; class=&quot;loading&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;loading-content&quot;&gt;Loading...&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">const isShow = ref(false)//定位loading 的开关</span><br><span class="line"></span><br><span class="line">const show = () =&gt; &#123;</span><br><span class="line">    isShow.value = true</span><br><span class="line">&#125;</span><br><span class="line">const hide = () =&gt; &#123;</span><br><span class="line">    isShow.value = false</span><br><span class="line">&#125;</span><br><span class="line">//对外暴露 当前组件的属性和方法</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">    isShow,</span><br><span class="line">    show,</span><br><span class="line">    hide</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="（二）插件声明"><a href="#（二）插件声明" class="headerlink" title="（二）插件声明"></a>（二）插件声明</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createVNode, render &#125; from &#x27;vue&#x27;;</span><br><span class="line">import type &#123; VNode, App &#125; from &#x27;vue&#x27;;</span><br><span class="line">import Loading from &#x27;../components/Loading.vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    install(app: App) &#123;</span><br><span class="line">        //createVNode vue提供的底层方法 可以给我们组件创建一个虚拟DOM 也就是Vnode</span><br><span class="line">        const vnode: VNode = createVNode(Loading)</span><br><span class="line">        //render 把我们的Vnode 生成真实DOM 并且挂载到指定节点</span><br><span class="line">        render(vnode, document.body)</span><br><span class="line">        // Vue 提供的全局配置 可以自定义</span><br><span class="line">        app.config.globalProperties.$loading = &#123;</span><br><span class="line">            show: () =&gt; vnode.component?.exposed?.show(),</span><br><span class="line">            hide: () =&gt; vnode.component?.exposed?.hide()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="（三）插件注册"><a href="#（三）插件注册" class="headerlink" title="（三）插件注册"></a>（三）插件注册</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import Loading from &#x27;./plugin/loading&#x27;</span><br><span class="line"></span><br><span class="line">const app = createApp(App)</span><br><span class="line">app.use(Loading)</span><br><span class="line"></span><br><span class="line">type Lod = &#123;</span><br><span class="line">    show: () =&gt; void,</span><br><span class="line">    hide: () =&gt; void</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">declare module &#x27;vue&#x27;&#123;</span><br><span class="line">    export interface ComponentCustomProperties &#123;</span><br><span class="line">        $loading: Lod</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="（四）使用"><a href="#（四）使用" class="headerlink" title="（四）使用"></a>（四）使用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//只有初始化的时候会展示一下loading,后面我点击按钮就没反应了</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;h1&gt;自定义插件&lt;/h1&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;button @click=&quot;showLoading&quot;&gt;展示插件loading...&lt;/button&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; ref, reactive, getCurrentInstance &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const instance = getCurrentInstance()</span><br><span class="line">console.log(&quot;setup中调用&quot;,instance)</span><br><span class="line">instance?.proxy?.$loading.show()</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">    instance?.proxy?.$loading.hide()</span><br><span class="line">&#125;, 5000)</span><br><span class="line"></span><br><span class="line">const showLoading = ()=&gt;&#123;</span><br><span class="line">    const instance = getCurrentInstance()</span><br><span class="line">    console.log(&quot;点击之后调用&quot;,instance)</span><br><span class="line">    instance?.proxy?.$loading.show()</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">        instance?.proxy?.$loading.hide()</span><br><span class="line">    &#125;, 5000)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="app-use源码实现"><a href="#app-use源码实现" class="headerlink" title="app.use源码实现"></a>app.use源码实现</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import type &#123; App &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; app &#125; from &#x27;./main&#x27;</span><br><span class="line"> </span><br><span class="line">interface Use &#123;</span><br><span class="line">    install: (app: App, ...options: any[]) =&gt; void</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const installedList = new Set()</span><br><span class="line"> </span><br><span class="line">export function MyUse&lt;T extends Use&gt;(plugin: T, ...options: any[]) &#123;</span><br><span class="line">	//防止重复注册</span><br><span class="line">    if(installedList.has(plugin))&#123;</span><br><span class="line">      return console.warn(&#x27;重复添加插件&#x27;,plugin)</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        plugin.install(app, ...options)</span><br><span class="line">        installedList.add(plugin)</span><br><span class="line">    &#125;</span><br><span class="line">    //返回app,实现app链式调用</span><br><span class="line">    return app</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="十九-Evnet-Loop回顾"><a href="#十九-Evnet-Loop回顾" class="headerlink" title="十九.Evnet Loop回顾"></a>十九.Evnet Loop回顾</h3><p>单线程就意味着所有的任务都需要排队，后面的任务需要等前面的任务执行完才能执行，如果前面的任务耗时过长，后面的任务就需要一直等，一些从用户角度上不需要等待的任务就会一直等待，这个从体验角度上来讲是不可接受的，所以<code>JS</code>中就出现了异步的概念。</p>
<h4 id="一-同步任务"><a href="#一-同步任务" class="headerlink" title="(一)同步任务"></a>(一)同步任务</h4><p>代码从上到下按顺序执行</p>
<h4 id="二-异步任务"><a href="#二-异步任务" class="headerlink" title="(二)异步任务"></a>(二)异步任务</h4><h5 id="1-宏任务"><a href="#1-宏任务" class="headerlink" title="1.宏任务"></a>1.宏任务</h5><p>script(整体代码)、setTimeout、setInterval、UI交互事件、postMessage、Ajax</p>
<h5 id="2-微任务"><a href="#2-微任务" class="headerlink" title="2.微任务"></a>2.微任务</h5><p>Promise.then catch finally、MutaionObserver、process.nextTick(Node.js 环境)</p>
<h4 id="三-运行机制"><a href="#三-运行机制" class="headerlink" title="(三)运行机制"></a>(三)运行机制</h4><p>所有的同步任务都是在主进程执行的形成一个执行栈，主线程之外，还存在一个”任务队列”，异步任务执行队列中先执行宏任务，然后清空当次宏任务中的所有微任务，然后进行下一个tick如此形成循环。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">async function Prom() &#123;</span><br><span class="line">    console.log(&quot;Y&quot;)</span><br><span class="line">    await Promise.resolve()</span><br><span class="line">    console.log(&quot;X&quot;)</span><br><span class="line">&#125;</span><br><span class="line">const x1 = setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(1)</span><br><span class="line">    Promise.resolve().then(()=&gt;&#123;</span><br><span class="line">        console.log(2)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;, 0);</span><br><span class="line">const x2 =setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(3)</span><br><span class="line">    Promise.resolve().then(()=&gt;&#123;</span><br><span class="line">        console.log(4)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;, 0);</span><br><span class="line">Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">    console.log(5)</span><br><span class="line">&#125;)</span><br><span class="line">Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">    console.log(6)</span><br><span class="line">&#125;)</span><br><span class="line">Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">    console.log(7)</span><br><span class="line">&#125;)</span><br><span class="line">Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">    console.log(8)</span><br><span class="line">&#125;)</span><br><span class="line">Prom()</span><br><span class="line">console.log(0)</span><br><span class="line"></span><br><span class="line">//先执行主线程:</span><br><span class="line">	同步任务:</span><br><span class="line">		prom()=================&gt;Y</span><br><span class="line">		console.log(0)=========&gt;0</span><br><span class="line">	异步宏任务:</span><br><span class="line">		x1=====================&gt;注意只是执行x1,不是执行x1中语句</span><br><span class="line">		x2</span><br><span class="line">	异步微任务:</span><br><span class="line">		Promise.resolve().then(()=&gt;&#123;...&#125;)========&gt;5 6 7 8 </span><br><span class="line">	prom中的异步语句:</span><br><span class="line">		await会阻塞程序执行,所以后面的console.log(&quot;X&quot;)写在后面跟写在Promise.resolve()里面差不		  多========================================&gt;X</span><br><span class="line">	x1中语句:</span><br><span class="line">		同步任务===================================&gt;1</span><br><span class="line">		异步任务===================================&gt;2</span><br><span class="line">	x2中语句:</span><br><span class="line">		同步任务===================================&gt;3</span><br><span class="line">		异步任务===================================&gt;4</span><br></pre></td></tr></table></figure>

<h3 id="二十-函数式编程-借助了h函数"><a href="#二十-函数式编程-借助了h函数" class="headerlink" title="二十.函数式编程(借助了h函数)"></a>二十.函数式编程(借助了h函数)</h3><p>之前学习了两种编程方式分别是template模板方式，和JSX方式.今天介绍第三种:函数式编程</p>
<h4 id="h-接收三个参数"><a href="#h-接收三个参数" class="headerlink" title="h 接收三个参数"></a><code>h</code> 接收三个参数</h4><ul>
<li>type 元素的类型</li>
<li>propsOrChildren 数据对象, 这里主要表示(props, attrs, dom props, class 和 style)</li>
<li>children 子节点</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;Btn @on-click=&quot;getNum&quot; text=&quot;测试h函数&quot;&gt;&lt;/Btn&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">&lt;script setup lang=&#x27;ts&#x27;&gt;</span><br><span class="line">import &#123; h, &#125; from &#x27;vue&#x27;;</span><br><span class="line">type Props = &#123;</span><br><span class="line">    text: string</span><br><span class="line">&#125;</span><br><span class="line">const Btn = (props: Props, ctx: any) =&gt; &#123;</span><br><span class="line">    return h(&#x27;div&#x27;, &#123;</span><br><span class="line">        class: &#x27;bg-[#bfa] w-100px text-center rounded-12px cursor-pointer&#x27;,</span><br><span class="line">        onClick: () =&gt; &#123;</span><br><span class="line">            ctx.emit(&#x27;on-click&#x27;, 123)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, props.text)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const getNum = (num: number) =&gt; &#123;</span><br><span class="line">    console.log(num);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="原理"><a href="#原理" class="headerlink" title="原理:"></a>原理:</h4><p>内部借助了createVNode()方法( vue提供的底层方法 可以给我们组件创建一个虚拟DOM 也就是Vnode)</p>
<h3 id="二十一-小技巧"><a href="#二十一-小技巧" class="headerlink" title="二十一.小技巧"></a>二十一.小技巧</h3><h4 id="（一）unplugin-auto-import"><a href="#（一）unplugin-auto-import" class="headerlink" title="（一）unplugin-auto-import"></a>（一）unplugin-auto-import</h4><p>作用:配置完成之后使用ref reactive watch 等 无须import 导入 可以直接使用 ,详细配置可以看:</p>
<p><a target="_blank" rel="noopener" href="https://gitcode.net/mirrors/antfu/unplugin-auto-import?utm_source=csdn_github_accelerator">mirrors &#x2F; antfu &#x2F; unplugin-auto-import · GitCode</a></p>
<h5 id="1-安装-2"><a href="#1-安装-2" class="headerlink" title="1.安装"></a>1.安装</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D unplugin-auto-import</span><br></pre></td></tr></table></figure>

<h5 id="2-vite配置"><a href="#2-vite配置" class="headerlink" title="2.vite配置"></a>2.vite配置</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">import &#123; defineConfig &#125; from &#x27;vite&#x27;</span><br><span class="line">import vue from &#x27;@vitejs/plugin-vue&#x27;</span><br><span class="line">import VueJsx from &#x27;@vitejs/plugin-vue-jsx&#x27;</span><br><span class="line">import AutoImport from &#x27;unplugin-auto-import/vite&#x27;</span><br><span class="line">// https://vitejs.dev/config/</span><br><span class="line">export default defineConfig(&#123;</span><br><span class="line">  plugins: [vue(),VueJsx(),AutoImport(&#123;</span><br><span class="line">    imports:[&#x27;vue&#x27;],</span><br><span class="line">    dts:&quot;src/auto-import.d.ts&quot;</span><br><span class="line">  &#125;)]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="（二）http-server"><a href="#（二）http-server" class="headerlink" title="（二）http-server"></a>（二）http-server</h4><p>作用:执行npm run build后会打包生成一个dist文件夹,查看dist文件内容</p>
<h5 id="1-安装-3"><a href="#1-安装-3" class="headerlink" title="1.安装"></a>1.安装</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install http-server -g</span><br></pre></td></tr></table></figure>

<p>2.在dist文件夹中执行,会打开一个9002端口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http-server -p 9002</span><br></pre></td></tr></table></figure>

<h2 id="完结撒花"><a href="#完结撒花" class="headerlink" title="完结撒花"></a>完结撒花</h2>

<div class="article-footer reveal fs14"><section id="license"><div class="header"><span>License</span></div><div class="body"><p>本文采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">署名-非商业性使用-相同方式共享 4.0 国际</a> 许可协议，转载请注明出处。</p>
</div></section></div>

</article>

<div class="related-wrap reveal" id="read-next"><section class="header cap theme"><span>READ NEXT</span></section><section class="body fs14"><a id="next" href="/2022/12/13/%E5%9C%A8vue2%E4%B8%AD%E5%B0%86js%E6%94%B9%E4%B8%BAts/">在vue2中将js改为ts<span class="note">Older</span></a><div class="line"></div><a id="prev" href="/2023/03/19/Express%E4%B8%8EMongodb/">Express与Mongodb<span class="note">Newer</span></a></section></div>








      
<footer class="page-footer reveal fs12"><hr><div class="text"><p>All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</p>
<p>This site was deployed by <a href="http://example.com/">@李阳滨</a> using <a target="_blank" rel="noopener" href="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.8.0" title="v1.8.0">Stellar</a>.</p>
</div></footer>

      <div class='float-panel mobile-only blur' style='display:none'>
  <button type='button' class='sidebar-toggle mobile' onclick='sidebar.toggle()'>
    <svg class="icon" style="width: 1em; height: 1em;vertical-align: middle;fill: currentColor;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15301"><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 2.3 26.8 24.6 47.5 51.6 47.6h416.5v4z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15302"></path><path d="M566.407 808.3c26.9-0.1 49.3-20.8 51.6-47.6-1.9-27.7-23.9-49.7-51.6-51.6h-412.6c-28.2-1.4-52.6 19.5-55.5 47.6 1.9 27.7 23.9 49.7 51.6 51.6h416.5z m309.3-249.9c26.9-0.1 49.3-20.8 51.6-47.6-2.2-26.8-24.6-47.5-51.6-47.6h-721.9c-27.7-2.8-52.5 17.4-55.3 45.1-0.1 0.8-0.1 1.7-0.2 2.5 0.9 27.2 23.6 48.5 50.7 47.6H875.707z m-103.1-245.9c26.9-0.1 49.3-20.8 51.6-47.6-0.4-28.3-23.2-51.1-51.5-51.6h-618.9c-29.5-1.1-54.3 21.9-55.5 51.4v0.2c1.4 27.8 25.2 49.2 53 47.8 0.8 0 1.7-0.1 2.5-0.2h618.8z" p-id="15303"></path></svg>
  </button>
</div>

    </div>
  </div>
  <div class='scripts'>
    <script type="text/javascript">
  stellar = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    loadCSS: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    // 从 butterfly 和 volantis 获得灵感
    loadScript: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    // https://github.com/jerryc127/hexo-theme-butterfly
    jQuery: (fn) => {
      if (typeof jQuery === 'undefined') {
        stellar.loadScript(stellar.plugins.jQuery).then(fn)
      } else {
        fn()
      }
    }
  };
  stellar.github = 'https://github.com/xaoxuu/hexo-theme-stellar/tree/1.8.0';
  stellar.config = {
    date_suffix: {
      just: 'Just',
      min: 'minutes ago',
      hour: 'hours ago',
      day: 'days ago',
      month: 'months ago',
    },
  };

  // required plugins (only load if needs)
  stellar.plugins = {
    jQuery: 'https://fastly.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js',
    sitesjs: '/js/plugins/sites.js',
    friendsjs: '/js/plugins/friends.js',
  };

  // optional plugins
  if ('true' == 'true') {
    stellar.plugins.lazyload = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js","transition":"blur"});
  }
  if ('true' == 'true') {
    stellar.plugins.swiper = Object.assign({"enable":true,"css":"https://unpkg.com/swiper@6/swiper-bundle.min.css","js":"https://unpkg.com/swiper@6/swiper-bundle.min.js"});
  }
  if ('' == 'true') {
    stellar.plugins.scrollreveal = Object.assign({"enable":null,"js":"https://fastly.jsdelivr.net/npm/scrollreveal@4.0.9/dist/scrollreveal.min.js","distance":"8px","duration":500,"interval":100,"scale":1});
  }
  if ('true' == 'true') {
    stellar.plugins.preload = Object.assign({"enable":true,"service":"flying_pages","instant_page":"https://fastly.jsdelivr.net/gh/volantis-x/cdn-volantis@4.1.2/js/instant_page.js","flying_pages":"https://fastly.jsdelivr.net/gh/gijo-varghese/flying-pages@2.1.2/flying-pages.min.js"});
  }
  if ('true' == 'true') {
    stellar.plugins.fancybox = Object.assign({"enable":true,"js":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js","css":"https://fastly.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css","selector":".swiper-slide img"});
  }
  if ('false' == 'true') {
    stellar.plugins.heti = Object.assign({"enable":false,"css":"https://unpkg.com/heti/umd/heti.min.css","js":"https://unpkg.com/heti/umd/heti-addon.min.js"});
  }
</script>

<!-- required -->

  
<script src="/js/main.js" async></script>



<!-- optional -->



<!-- inject -->


  </div>
</body>
</html>
